(function(E,y){var A=6;var f=4;var B="asc";var c="desc";var v="_ng_field_";var t="_ng_depth_";var G="_ng_hidden_";var n="_ng_column_";var o=/CUSTOM_FILTERS/g;var h=/COL_FIELD/g;var a=/DISPLAY_CELL_TEMPLATE/g;var K=/EDITABLE_CELL_TEMPLATE/g;var q=/CELL_EDITABLE_CONDITION/g;var H=/<.+>/;var J=/(\([^)]*\))?$/;var x=/\./g;var p=/'/g;var C=/^(.*)((?:\s*\[\s*\d+\s*\]\s*)|(?:\s*\[\s*"(?:[^"\\]|\\.)*"\s*\]\s*)|(?:\s*\[\s*'(?:[^'\\]|\\.)*'\s*\]\s*))(.*)$/;E.ngGrid={};E.ngGrid.i18n={};var z=angular.module("ngGrid.services",[]);var i=angular.module("ngGrid.directives",[]);var d=angular.module("ngGrid.filters",[]);angular.module("ngGrid",["ngGrid.services","ngGrid.directives","ngGrid.filters"]);var I=function(Z,S,X,L){if(Z.selectionProvider.selectedItems===undefined||L.config.noKeyboardNavigation){return true}if(document.activeElement.tagName==="INPUT"){return true}var P=X.which||X.keyCode,N,R=false,V=false,U=Z.selectionProvider.lastClickedRow===undefined?1:Z.selectionProvider.lastClickedRow.rowIndex,aa=Z.columns.filter(function(af){return af.visible&&af.width>0}),T=Z.columns.filter(function(af){return af.pinned});if(Z.col){N=aa.indexOf(Z.col)}if(P!==37&&P!==38&&P!==39&&P!==40&&(L.config.noTabInterference||P!==9)&&P!==13){return true}if(Z.enableCellSelection){if(P===9){X.preventDefault()}var ac=Z.showSelectionCheckbox?N===1:N===0;var ad=N===1||N===0;var ae=N===(aa.length-1)||N===(aa.length-2);var ab=aa.indexOf(Z.col)===(aa.length-1);var M=T.indexOf(Z.col)===(T.length-1);if(P===37||P===9&&X.shiftKey){var O=0;if(!ac){N-=1}if(ad){if(ac&&P===9&&X.shiftKey){O=L.$canvas.width();N=aa.length-1;V=true}else{O=L.$viewport.scrollLeft()-Z.col.width}}else{if(T.length>0){O=L.$viewport.scrollLeft()-aa[N].width}}L.$viewport.scrollLeft(O)}else{if(P===39||P===9&&!X.shiftKey){if(ae){if(ab&&P===9&&!X.shiftKey){L.$viewport.scrollLeft(0);N=Z.showSelectionCheckbox?1:0;R=true}else{L.$viewport.scrollLeft(L.$viewport.scrollLeft()+Z.col.width)}}else{if(M){L.$viewport.scrollLeft(0)}}if(!ab){N+=1}}}}var Y;if(Z.configGroups.length>0){Y=L.rowFactory.parsedData.filter(function(af){return !af.isAggRow})}else{Y=L.filteredRows}var Q=0;if(U!==0&&(P===38||P===13&&X.shiftKey||P===9&&X.shiftKey&&V)){Q=-1}else{if(U!==Y.length-1&&(P===40||P===13&&!X.shiftKey||P===9&&R)){Q=1}}if(Q){var W=Y[U+Q];if(W.beforeSelectionChange(W,X)){W.continueSelection(X);Z.$emit("ngGridEventDigestGridParent");if(Z.selectionProvider.lastClickedRow.renderedRowIndex>=Z.renderedRows.length-A-2){L.$viewport.scrollTop(L.$viewport.scrollTop()+Z.rowHeight)}else{if(Z.selectionProvider.lastClickedRow.renderedRowIndex<=A+2){L.$viewport.scrollTop(L.$viewport.scrollTop()-Z.rowHeight)}}}}if(Z.enableCellSelection){setTimeout(function(){Z.domAccessProvider.focusCellElement(Z,Z.renderedColumns.indexOf(aa[N]))},3)}return false};if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(M){var L=this.length>>>0;var N=Number(arguments[1])||0;N=(N<0)?Math.ceil(N):Math.floor(N);if(N<0){N+=L}for(;N<L;N++){if(N in this&&this[N]===M){return N}}return -1}}if(!Array.prototype.filter){Array.prototype.filter=function(M){var Q=Object(this);var L=Q.length>>>0;if(typeof M!=="function"){throw new TypeError()}var P=[];var O=arguments[1];for(var N=0;N<L;N++){if(N in Q){var R=Q[N];if(M.call(O,R,N,Q)){P.push(R)}}}return P}}d.filter("checkmark",function(){return function(L){return L?"\u2714":"\u2718"}});d.filter("ngColumns",function(){return function(L){return L.filter(function(M){return !M.isAggCol})}});angular.module("ngGrid.services").factory("$domUtilityService",["$utilityService","$window",function(P,O){var L={};var N={};var M=function(){var Q=y("<div></div>");Q.appendTo("body");Q.height(100).width(100).css("position","absolute").css("overflow","scroll");Q.append('<div style="height: 400px; width: 400px;"></div>');L.ScrollH=(Q.height()-Q[0].clientHeight);L.ScrollW=(Q.width()-Q[0].clientWidth);Q.empty();Q.attr("style","");Q.append('<span style="font-family: Verdana, Helvetica, Sans-Serif; font-size: 14px;"><strong>M</strong></span>');L.LetterW=Q.children().first().width();Q.remove()};L.eventStorage={};L.AssignGridContainers=function(Q,T,S){S.$root=y(T);S.$topPanel=S.$root.find(".ngTopPanel");S.$groupPanel=S.$root.find(".ngGroupPanel");S.$headerContainer=S.$topPanel.find(".ngHeaderContainer");Q.$headerContainer=S.$headerContainer;S.$headerScroller=S.$topPanel.find(".ngHeaderScroller");S.$headers=S.$headerScroller.children();S.$viewport=S.$root.find(".ngViewport");S.$canvas=S.$viewport.find(".ngCanvas");S.$footerPanel=S.$root.find(".ngFooterPanel");var R=Q.$watch(function(){return S.$viewport.scrollLeft()},function(U){return S.$headerContainer.scrollLeft(U)});Q.$on("$destroy",function(){if(S.$root){y(S.$root.parent()).off("resize.nggrid");S.$root=null;S.$topPanel=null;S.$headerContainer=null;S.$headers=null;S.$canvas=null;S.$footerPanel=null}R()});L.UpdateGridLayout(Q,S)};L.getRealWidth=function(T){var R=0;var Q={visibility:"hidden",display:"block"};var S=T.parents().andSelf().not(":visible");y.swap(S[0],Q,function(){R=T.outerWidth()});return R};L.UpdateGridLayout=function(Q,R){if(!R.$root){return}var S=R.$viewport.scrollTop();R.elementDims.rootMaxW=R.$root.width();if(R.$root.is(":hidden")){R.elementDims.rootMaxW=L.getRealWidth(R.$root)}R.elementDims.rootMaxH=R.$root.height();R.refreshDomSizes();Q.adjustScrollTop(S,true)};L.numberOfGrids=0;L.setStyleText=function(S,R){var T=S.styleSheet,Q=S.gridId,U=O.document;if(!T){T=U.getElementById(Q)}if(!T){T=U.createElement("style");T.type="text/css";T.id=Q;(U.head||U.getElementsByTagName("head")[0]).appendChild(T)}if(T.styleSheet&&!T.sheet){T.styleSheet.cssText=R}else{T.innerHTML=R}S.styleSheet=T;S.styleText=R};L.BuildStyles=function(ab,R,Z){var Q=R.config.rowHeight,V=R.gridId,Y,aa=ab.columns,U=0;var W=ab.totalRowWidth();Y="."+V+" .ngCanvas { width: "+W+"px; }."+V+" .ngRow { width: "+W+"px; }."+V+" .ngCanvas { width: "+W+"px; }."+V+" .ngHeaderScroller { width: "+(W+L.ScrollH)+"px}";for(var X=0;X<aa.length;X++){var T=aa[X];if(T.visible!==false){var S=0;if((X===aa.length-1)&&(U+T.width<R.elementDims.rootMaxW)){S=R.elementDims.rootMaxW-U-T.width}Y+="."+V+" .col"+X+" { width: "+(T.width+S)+"px; left: "+U+"px; height: "+Q+"px }."+V+" .colt"+X+" { width: "+(T.width+S)+"px; }";U+=T.width}}L.setStyleText(R,Y);ab.adjustScrollLeft(R.$viewport.scrollLeft());if(Z){L.digest(ab)}};L.setColLeft=function(Q,U,S){if(S.styleText){var T=N[Q.index];if(!T){T=N[Q.index]=new RegExp(".col"+Q.index+" { width: [0-9]+px; left: [0-9]+px")}var R=S.styleText.replace(T,".col"+Q.index+" { width: "+Q.width+"px; left: "+U+"px");L.setStyleText(S,R)}};L.setColLeft.immediate=1;L.RebuildGrid=function(Q,R){L.UpdateGridLayout(Q,R);if(R.config.maintainColumnRatios==null||R.config.maintainColumnRatios){R.configureColumnWidths()}Q.adjustScrollLeft(R.$viewport.scrollLeft());L.BuildStyles(Q,R,true)};L.digest=function(Q){if(!Q.$root.$$phase){Q.$digest()}};L.ScrollH=17;L.ScrollW=17;L.LetterW=10;M();return L}]);angular.module("ngGrid.services").factory("$sortService",["$parse","$utilityService",function(L,N){var M={};M.colSortFnCache={};M.isCustomSort=false;M.guessSortFn=function(O){var P=typeof(O);switch(P){case"number":return M.sortNumber;case"boolean":return M.sortBool;case"string":return O.match(/^[-+]?[£$¤]?[\d,.]+%?$/)?M.sortNumberStr:M.sortAlpha;default:if(Object.prototype.toString.call(O)==="[object Date]"){return M.sortDate}else{return M.basicSort}}};M.basicSort=function(P,O){if(P===O){return 0}if(P<O){return -1}return 1};M.sortNumber=function(P,O){return P-O};M.sortNumberStr=function(Q,O){var T,S,R=false,P=false;T=parseFloat(Q.replace(/[^0-9.-]/g,""));if(isNaN(T)){R=true}S=parseFloat(O.replace(/[^0-9.-]/g,""));if(isNaN(S)){P=true}if(R&&P){return 0}if(R){return 1}if(P){return -1}return T-S};M.sortAlpha=function(Q,O){var R=Q.toLowerCase(),P=O.toLowerCase();return R===P?0:(R<P?-1:1)};M.sortDate=function(P,O){var R=P.getTime(),Q=O.getTime();return R===Q?0:(R<Q?-1:1)};M.sortBool=function(P,O){if(P&&O){return 0}if(!P&&!O){return 0}else{return P?1:-1}};M.sortData=function(Q,S){if(!S||!Q){return}var P=Q.fields.length,O=Q.fields,R,T,U=S.slice(0);S.sort(function(ab,aa){var W=0,Y=0,X,Z;while(W===0&&Y<P){R=Q.columns[Y];T=Q.directions[Y];Z=M.getSortFn(R,U);var V=N.evalProperty(ab,O[Y]);var ac=N.evalProperty(aa,O[Y]);if(M.isCustomSort){X=Z(V,ac);W=T===B?X:0-X}else{if(V==null||ac==null){if(ac==null&&V==null){W=0}else{if(V==null){W=1}else{if(ac==null){W=-1}}}}else{X=Z(V,ac);W=T===B?X:0-X}}Y++}return W})};M.Sort=function(O,P){if(M.isSorting){return}M.isSorting=true;M.sortData(O,P);M.isSorting=false};M.getSortFn=function(O,R){var Q,P;if(M.colSortFnCache[O.field]){Q=M.colSortFnCache[O.field]}else{if(O.sortingAlgorithm!==undefined){Q=O.sortingAlgorithm;M.colSortFnCache[O.field]=O.sortingAlgorithm;M.isCustomSort=true}else{P=R[0];if(!P){return Q}Q=M.guessSortFn(L("entity['"+O.field.replace(x,"']['")+"']")({entity:P}));if(Q){M.colSortFnCache[O.field]=Q}else{Q=M.sortAlpha}}}return Q};return M}]);angular.module("ngGrid.services").factory("$utilityService",["$parse",function(M){var N=/function (.{1,})\(/;var L={visualLength:function(R){var Q=document.getElementById("testDataLength");if(!Q){Q=document.createElement("SPAN");Q.id="testDataLength";Q.style.visibility="hidden";document.body.appendChild(Q)}var O=y(R);y(Q).css({font:O.css("font"),"font-size":O.css("font-size"),"font-family":O.css("font-family")});Q.innerHTML=O.text();var P=Q.offsetWidth;document.body.removeChild(Q);return P},forIn:function(P,O){for(var Q in P){if(P.hasOwnProperty(Q)){O(P[Q],Q)}}},endsWith:function(P,O){if(!P||!O||typeof P!=="string"){return false}return P.indexOf(O,P.length-O.length)!==-1},isNullOrUndefined:function(O){if(O===undefined||O===null){return true}return false},getElementsByClassName:function(P){if(document.getElementsByClassName){return document.getElementsByClassName(P)}else{var O=[];var T=new RegExp("\\b"+P+"\\b");var S=document.getElementsByTagName("*");for(var R=0;R<S.length;R++){var Q=S[R].className;if(T.test(Q)){O.push(S[R])}}return O}},newId:(function(){var O=new Date().getTime();return function(){return O+=1}})(),seti18n:function(O,R){var Q=E.ngGrid.i18n[R];for(var P in Q){O.i18n[P]=Q[P]}},getInstanceType:function(Q){var P=(N).exec(Q.constructor.toString());if(P&&P.length>1){var O=P[1].replace(/^\s+|\s+$/g,"");return O}else{return""}},init:function(){function O(S){var P=C.exec(S);if(P){return(P[1]?O(P[1]):P[1])+P[2]+(P[3]?O(P[3]):P[3])}else{S=S.replace(p,"\\'");var R=S.split(x);var Q=[R.shift()];angular.forEach(R,function(T){Q.push(T.replace(J,"']$1"))});return Q.join("['")}}this.preEval=O;this.evalProperty=function(P,Q){return M(O("entity."+Q))({entity:P})};delete this.init;return this}}.init();return L}]);var D=function(O,M,N,L){this.rowIndex=0;this.offsetTop=this.rowIndex*N;this.entity=O;this.label=O.gLabel;this.field=O.gField;this.depth=O.gDepth;this.parent=O.parent;this.children=O.children;this.aggChildren=O.aggChildren;this.aggIndex=O.aggIndex;this.collapsed=L;this.groupInitState=L;this.rowFactory=M;this.rowHeight=N;this.isAggRow=true;this.offsetLeft=O.gDepth*25;this.aggLabelFilter=O.aggLabelFilter};D.prototype.toggleExpand=function(){this.collapsed=this.collapsed?false:true;if(this.orig){this.orig.collapsed=this.collapsed}this.notifyChildren()};D.prototype.setExpand=function(L){this.collapsed=L;if(this.orig){this.orig.collapsed=L}this.notifyChildren()};D.prototype.notifyChildren=function(){var N=Math.max(this.rowFactory.aggCache.length,this.children.length);for(var M=0;M<N;M++){if(this.aggChildren[M]){this.aggChildren[M].entity[G]=this.collapsed;if(this.collapsed){this.aggChildren[M].setExpand(this.collapsed)}}if(this.children[M]){this.children[M][G]=this.collapsed}if(M>this.aggIndex&&this.rowFactory.aggCache[M]){var L=this.rowFactory.aggCache[M];var O=(30*this.children.length);L.offsetTop=this.collapsed?L.offsetTop-O:L.offsetTop+O}}this.rowFactory.renderedChange()};D.prototype.aggClass=function(){return this.collapsed?"ngAggArrowCollapsed":"ngAggArrowExpanded"};D.prototype.totalChildren=function(){if(this.aggChildren.length>0){var L=0;var M=function(N){if(N.aggChildren.length>0){angular.forEach(N.aggChildren,function(O){M(O)})}else{L+=N.children.length}};M(this);return L}else{return this.children.length}};D.prototype.copy=function(){var L=new D(this.entity,this.rowFactory,this.rowHeight,this.groupInitState);L.orig=this;return L};var b=function(N,U,L,Q,O,R){var V=this,S=N.colDef,P=500,T=0,M=null;V.colDef=N.colDef;V.width=S.width;V.groupIndex=0;V.isGroupedBy=false;V.minWidth=!S.minWidth?50:S.minWidth;V.maxWidth=!S.maxWidth?9000:S.maxWidth;V.enableCellEdit=S.enableCellEdit!==undefined?S.enableCellEdit:(N.enableCellEdit||N.enableCellEditOnFocus);V.cellEditableCondition=S.cellEditableCondition||N.cellEditableCondition||"true";V.headerRowHeight=N.headerRowHeight;V.displayName=(S.displayName===undefined)?S.field:S.displayName;V.index=N.index;V.isAggCol=N.isAggCol;V.cellClass=S.cellClass;V.sortPriority=undefined;V.cellFilter=S.cellFilter?S.cellFilter:"";V.field=S.field;V.aggLabelFilter=S.aggLabelFilter||S.cellFilter;V.visible=R.isNullOrUndefined(S.visible)||S.visible;V.sortable=false;V.resizable=false;V.pinnable=false;V.pinned=(N.enablePinning&&S.pinned);V.originalIndex=N.originalIndex==null?V.index:N.originalIndex;V.groupable=R.isNullOrUndefined(S.groupable)||S.groupable;if(N.enableSort){V.sortable=R.isNullOrUndefined(S.sortable)||S.sortable}if(N.enableResize){V.resizable=R.isNullOrUndefined(S.resizable)||S.resizable}if(N.enablePinning){V.pinnable=R.isNullOrUndefined(S.pinnable)||S.pinnable}V.sortDirection=undefined;V.sortingAlgorithm=S.sortFn;V.headerClass=S.headerClass;V.cursor=V.sortable?"pointer":"default";V.headerCellTemplate=S.headerCellTemplate||O.get("headerCellTemplate.html");V.cellTemplate=S.cellTemplate||O.get("cellTemplate.html").replace(o,V.cellFilter?"|"+V.cellFilter:"");if(V.enableCellEdit){V.cellEditTemplate=S.cellEditTemplate||O.get("cellEditTemplate.html");V.editableCellTemplate=S.editableCellTemplate||O.get("editableCellTemplate.html")}if(S.cellTemplate&&!H.test(S.cellTemplate)){V.cellTemplate=O.get(S.cellTemplate)||y.ajax({type:"GET",url:S.cellTemplate,async:false}).responseText}if(V.enableCellEdit&&S.editableCellTemplate&&!H.test(S.editableCellTemplate)){V.editableCellTemplate=O.get(S.editableCellTemplate)||y.ajax({type:"GET",url:S.editableCellTemplate,async:false}).responseText}if(S.headerCellTemplate&&!H.test(S.headerCellTemplate)){V.headerCellTemplate=O.get(S.headerCellTemplate)||y.ajax({type:"GET",url:S.headerCellTemplate,async:false}).responseText}V.colIndex=function(){var W=V.pinned?"pinned ":"";W+="col"+V.index+" colt"+V.index;if(V.cellClass){W+=" "+V.cellClass}return W};V.groupedByClass=function(){return V.isGroupedBy?"ngGroupedByIcon":"ngGroupIcon"};V.toggleVisible=function(){V.visible=!V.visible};V.showSortButtonUp=function(){return V.sortable?V.sortDirection===c:V.sortable};V.showSortButtonDown=function(){return V.sortable?V.sortDirection===B:V.sortable};V.noSortVisible=function(){return !V.sortDirection};V.sort=function(W){if(!V.sortable){return true}var X=V.sortDirection===B?c:B;V.sortDirection=X;N.sortCallback(V,W);return false};V.gripClick=function(){T++;if(T===1){M=setTimeout(function(){T=0},P)}else{clearTimeout(M);N.resizeOnDataCallback(V);T=0}};V.gripOnMouseDown=function(W){U.isColumnResizing=true;if(W.ctrlKey&&!V.pinned){V.toggleVisible();Q.BuildStyles(U,L);return true}W.target.parentElement.style.cursor="col-resize";V.startMousePosition=W.clientX;V.origWidth=V.width;y(document).mousemove(V.onMouseMove);y(document).mouseup(V.gripOnMouseUp);return false};V.onMouseMove=function(X){var Y=X.clientX-V.startMousePosition;var W=Y+V.origWidth;V.width=(W<V.minWidth?V.minWidth:(W>V.maxWidth?V.maxWidth:W));U.hasUserChangedGridColumnWidths=true;Q.BuildStyles(U,L);return false};V.gripOnMouseUp=function(W){y(document).off("mousemove",V.onMouseMove);y(document).off("mouseup",V.gripOnMouseUp);W.target.parentElement.style.cursor="default";Q.digest(U);U.isColumnResizing=false;return false};V.copy=function(){var W=new b(N,U,L,Q,O,R);W.isClone=true;W.orig=V;return W};V.setVars=function(W){V.orig=W;V.width=W.width;V.groupIndex=W.groupIndex;V.isGroupedBy=W.isGroupedBy;V.displayName=W.displayName;V.index=W.index;V.isAggCol=W.isAggCol;V.cellClass=W.cellClass;V.cellFilter=W.cellFilter;V.field=W.field;V.aggLabelFilter=W.aggLabelFilter;V.visible=W.visible;V.sortable=W.sortable;V.resizable=W.resizable;V.pinnable=W.pinnable;V.pinned=W.pinned;V.originalIndex=W.originalIndex;V.sortDirection=W.sortDirection;V.sortingAlgorithm=W.sortingAlgorithm;V.headerClass=W.headerClass;V.headerCellTemplate=W.headerCellTemplate;V.cellTemplate=W.cellTemplate;V.cellEditTemplate=W.cellEditTemplate}};var s=function(L){this.outerHeight=null;this.outerWidth=null;y.extend(this,L)};var r=function(L){this.previousColumn=null;this.grid=L};r.prototype.changeUserSelect=function(M,L){M.css({"-webkit-touch-callout":L,"-webkit-user-select":L,"-khtml-user-select":L,"-moz-user-select":L==="none"?"-moz-none":L,"-ms-user-select":L,"user-select":L})};r.prototype.focusCellElement=function(L,M){if(L.selectionProvider.lastClickedRow){var P=M!==undefined?M:this.previousColumn;var Q=L.selectionProvider.lastClickedRow.clone?L.selectionProvider.lastClickedRow.clone.elm:L.selectionProvider.lastClickedRow.elm;if(P!==undefined&&Q){var O=angular.element(Q[0].children).filter(function(){return this.nodeType!==8});var N=Math.max(Math.min(L.renderedColumns.length-1,P),0);if(this.grid.config.showSelectionCheckbox&&angular.element(O[N]).scope()&&angular.element(O[N]).scope().col.index===0){N=1}if(O[N]){O[N].children[1].children[0].focus()}this.previousColumn=P}}};r.prototype.selectionHandlers=function(M,Q){var N=false;var L=this;function O(R){if(R.keyCode===16){L.changeUserSelect(Q,"none",R);return true}else{if(!N){N=true;var S=I(M,Q,R,L.grid);N=false;return S}}return true}Q.bind("keydown",O);function P(R){if(R.keyCode===16){L.changeUserSelect(Q,"text",R)}return true}Q.bind("keyup",P);Q.on("$destroy",function(){Q.off("keydown",O);Q.off("keyup",P)})};var w=function(P,N,M,O){var L=this;L.colToMove=undefined;L.groupToMove=undefined;L.assignEvents=function(){if(P.config.jqueryUIDraggable&&!P.config.enablePinning){P.$groupPanel.droppable({addClasses:false,drop:function(Q){L.onGroupDrop(Q)}});P.$groupPanel.on("$destroy",function(){P.$groupPanel=null})}else{P.$groupPanel.on("mousedown",L.onGroupMouseDown).on("dragover",L.dragOver).on("drop",L.onGroupDrop);P.$topPanel.on("mousedown",".ngHeaderScroller",L.onHeaderMouseDown).on("dragover",".ngHeaderScroller",L.dragOver);P.$groupPanel.on("$destroy",function(){if(P.$groupPanel){P.$groupPanel.off("mousedown")}P.$groupPanel=null});if(P.config.enableColumnReordering){P.$topPanel.on("drop",".ngHeaderScroller",L.onHeaderDrop)}P.$topPanel.on("$destroy",function(){if(P.$topPanel){P.$topPanel.off("mousedown")}if(P.config.enableColumnReordering&&P.$topPanel){P.$topPanel.off("drop")}P.$topPanel=null})}N.$on("$destroy",N.$watch("renderedColumns",function(){O(L.setDraggables)}))};L.dragStart=function(Q){Q.dataTransfer.setData("text","")};L.dragOver=function(Q){Q.preventDefault()};L.setDraggables=function(){if(!P.config.jqueryUIDraggable){if(P.$root){var Q=P.$root.find(".ngHeaderSortColumn");angular.forEach(Q,function(S){if(S.className&&S.className.indexOf("ngHeaderSortColumn")!==-1){S.setAttribute("draggable","true");if(S.addEventListener){S.addEventListener("dragstart",L.dragStart);angular.element(S).on("$destroy",function(){angular.element(S).off("dragstart",L.dragStart);S.removeEventListener("dragstart",L.dragStart)})}}});if(navigator.userAgent.indexOf("MSIE")!==-1){var R=P.$root.find(".ngHeaderSortColumn");R.bind("selectstart",function(){this.dragDrop();return false});angular.element(R).on("$destroy",function(){R.off("selectstart")})}}}else{if(P.$root){P.$root.find(".ngHeaderSortColumn").draggable({helper:"clone",appendTo:"body",stack:"div",addClasses:false,start:function(S){L.onHeaderMouseDown(S)}}).droppable({drop:function(S){L.onHeaderDrop(S)}})}}};L.onGroupMouseDown=function(S){var Q=y(S.target);if(Q[0].className!=="ngRemoveGroup"){var R=angular.element(Q).scope();if(R){if(!P.config.jqueryUIDraggable){Q.attr("draggable","true");if(this.addEventListener){this.addEventListener("dragstart",L.dragStart);angular.element(this).on("$destroy",function(){this.removeEventListener("dragstart",L.dragStart)})}if(navigator.userAgent.indexOf("MSIE")!==-1){Q.bind("selectstart",function(){this.dragDrop();return false});Q.on("$destroy",function(){Q.off("selectstart")})}}L.groupToMove={header:Q,groupName:R.group,index:R.$index}}}else{L.groupToMove=undefined}};L.onGroupDrop=function(Q){Q.stopPropagation();var R;var S;if(L.groupToMove){R=y(Q.target).closest(".ngGroupElement");if(R.context.className==="ngGroupPanel"){N.configGroups.splice(L.groupToMove.index,1);N.configGroups.push(L.groupToMove.groupName)}else{S=angular.element(R).scope();if(S){if(L.groupToMove.index!==S.$index){N.configGroups.splice(L.groupToMove.index,1);N.configGroups.splice(S.$index,0,L.groupToMove.groupName)}}}L.groupToMove=undefined;P.fixGroupIndexes()}else{if(L.colToMove){if(N.configGroups.indexOf(L.colToMove.col)===-1){R=y(Q.target).closest(".ngGroupElement");if(R.context.className==="ngGroupPanel"||R.context.className==="ngGroupPanelDescription ng-binding"){N.groupBy(L.colToMove.col)}else{S=angular.element(R).scope();if(S){N.removeGroup(S.$index)}}}L.colToMove=undefined}}if(!N.$$phase){N.$apply()}};L.onHeaderMouseDown=function(S){var R=y(S.target).closest(".ngHeaderSortColumn");var Q=angular.element(R).scope();if(Q){L.colToMove={header:R,col:Q.col}}};L.onHeaderDrop=function(S){if(!L.colToMove||L.colToMove.col.pinned){return}var R=y(S.target).closest(".ngHeaderSortColumn");var Q=angular.element(R).scope();if(Q){if(L.colToMove.col===Q.col||Q.col.pinned){return}N.columns.splice(L.colToMove.col.index,1);N.columns.splice(Q.col.index,0,L.colToMove.col);P.fixColumnIndexes();L.colToMove=undefined;M.digest(N)}};L.assignGridEventHandlers=function(){if(P.config.tabIndex===-1){P.$viewport.attr("tabIndex",M.numberOfGrids);M.numberOfGrids++}else{P.$viewport.attr("tabIndex",P.config.tabIndex)}var Q;var R=function(){clearTimeout(Q);Q=setTimeout(function(){M.RebuildGrid(N,P)},100)};y(E).on("resize.nggrid",R);var S;var T=function(){clearTimeout(S);S=setTimeout(function(){M.RebuildGrid(N,P)},100)};y(P.$root.parent()).on("resize.nggrid",T);N.$on("$destroy",function(){y(E).off("resize.nggrid",R)})};L.assignGridEventHandlers();L.assignEvents()};var u=function(L,M){L.maxRows=function(){var N=Math.max(L.totalServerItems,M.data.length);return N};L.$on("$destroy",L.$watch("totalServerItems",function(O,N){L.currentMaxPages=L.maxPages()}));L.multiSelect=(M.config.enableRowSelection&&M.config.multiSelect);L.selectedItemCount=M.selectedItemCount;L.maxPages=function(){if(L.maxRows()===0){return 1}return Math.ceil(L.maxRows()/L.pagingOptions.pageSize)};L.pageForward=function(){var N=L.pagingOptions.currentPage;if(L.totalServerItems>0){L.pagingOptions.currentPage=Math.min(N+1,L.maxPages())}else{L.pagingOptions.currentPage++}};L.pageBackward=function(){var N=L.pagingOptions.currentPage;L.pagingOptions.currentPage=Math.max(N-1,1)};L.pageToFirst=function(){L.pagingOptions.currentPage=1};L.pageToLast=function(){var N=L.maxPages();L.pagingOptions.currentPage=N};L.cantPageForward=function(){var O=L.pagingOptions.currentPage;var N=L.maxPages();if(L.totalServerItems>0){return O>=N}else{return M.data.length<1}};L.cantPageToLast=function(){if(L.totalServerItems>0){return L.cantPageForward()}else{return true}};L.cantPageBackward=function(){var N=L.pagingOptions.currentPage;return N<=1}};var g=function(V,X,O,T,R,M,U,L,N,S,Q){var P={aggregateTemplate:undefined,afterSelectionChange:function(){},beforeSelectionChange:function(){return true},checkboxCellTemplate:undefined,checkboxHeaderTemplate:undefined,columnDefs:undefined,data:[],dataUpdated:function(){},enableCellEdit:false,enableCellEditOnFocus:false,enableCellSelection:false,enableColumnResize:false,enableColumnReordering:false,enableColumnHeavyVirt:false,enablePaging:false,enablePinning:false,enableRowSelection:true,enableSorting:true,enableHighlighting:false,excludeProperties:[],filterOptions:{filterText:"",useExternalFilter:false},footerRowHeight:55,footerTemplate:undefined,forceSyncScrolling:true,groups:[],groupsCollapsedByDefault:true,headerRowHeight:30,headerRowTemplate:undefined,jqueryUIDraggable:false,jqueryUITheme:false,keepLastSelected:true,maintainColumnRatios:undefined,menuTemplate:undefined,multiSelect:true,pagingOptions:{pageSizes:[250,500,1000],pageSize:250,currentPage:1},pinSelectionCheckbox:false,plugins:[],primaryKey:undefined,rowHeight:30,rowTemplate:undefined,selectedItems:[],selectionCheckboxColumnWidth:25,selectWithCheckboxOnly:false,showColumnMenu:false,showFilter:false,showFooter:false,showGroupPanel:false,showSelectionCheckbox:false,sortInfo:{fields:[],columns:[],directions:[]},tabIndex:-1,totalServerItems:0,useExternalSorting:false,i18n:"en",virtualizationThreshold:50,noTabInterference:false},W=this;W.maxCanvasHt=0;W.config=y.extend(P,E.ngGrid.config,X);W.config.showSelectionCheckbox=(W.config.showSelectionCheckbox&&W.config.enableColumnHeavyVirt===false);W.config.enablePinning=(W.config.enablePinning&&W.config.enableColumnHeavyVirt===false);W.config.selectWithCheckboxOnly=(W.config.selectWithCheckboxOnly&&W.config.showSelectionCheckbox!==false);W.config.pinSelectionCheckbox=W.config.enablePinning;if(typeof X.columnDefs==="string"){W.config.columnDefs=V.$eval(X.columnDefs)}W.rowCache=[];W.rowMap=[];W.gridId="ng"+U.newId();W.$root=null;W.$groupPanel=null;W.$topPanel=null;W.$headerContainer=null;W.$headerScroller=null;W.$headers=null;W.$viewport=null;W.$canvas=null;W.rootDim=W.config.gridDim;W.data=[];W.lateBindColumns=false;W.filteredRows=[];W.initTemplates=function(){var Z=["rowTemplate","aggregateTemplate","headerRowTemplate","checkboxCellTemplate","checkboxHeaderTemplate","menuTemplate","footerTemplate"];var Y=[];angular.forEach(Z,function(aa){Y.push(W.getTemplate(aa))});return Q.all(Y)};W.getTemplate=function(aa){var Z=W.config[aa];var Y=W.gridId+aa+".html";var ac=Q.defer();if(Z&&!H.test(Z)){S.get(Z,{cache:M}).success(function(ad){M.put(Y,ad);ac.resolve()}).error(function(ad){ac.reject("Could not load template: "+Z)})}else{if(Z){M.put(Y,Z);ac.resolve()}else{var ab=aa+".html";M.put(Y,M.get(ab));ac.resolve()}}return ac.promise};if(typeof W.config.data==="object"){W.data=W.config.data}W.calcMaxCanvasHeight=function(){var Y;if(W.config.groups.length>0){Y=W.rowFactory.parsedData.filter(function(Z){return !Z[G]}).length*W.config.rowHeight}else{Y=W.filteredRows.length*W.config.rowHeight}return Y};W.elementDims={scrollW:0,scrollH:0,rowIndexCellW:W.config.selectionCheckboxColumnWidth,rowSelectedCellW:W.config.selectionCheckboxColumnWidth,rootMaxW:0,rootMaxH:0};W.setRenderedRows=function(Z){V.renderedRows.length=Z.length;for(var Y=0;Y<Z.length;Y++){if(!V.renderedRows[Y]||(Z[Y].isAggRow||V.renderedRows[Y].isAggRow)){V.renderedRows[Y]=Z[Y].copy();V.renderedRows[Y].collapsed=Z[Y].collapsed;if(!Z[Y].isAggRow){V.renderedRows[Y].setVars(Z[Y])}}else{V.renderedRows[Y].setVars(Z[Y])}V.renderedRows[Y].rowIndex=Z[Y].rowIndex;V.renderedRows[Y].offsetTop=Z[Y].offsetTop;V.renderedRows[Y].selected=Z[Y].selected;Z[Y].renderedRowIndex=Y}W.refreshDomSizes();V.$emit("ngGridEventRows",Z)};W.minRowsToRender=function(){var Y=V.viewportDimHeight()||1;return Math.floor(Y/W.config.rowHeight)};W.refreshDomSizes=function(){var Y=new s();Y.outerWidth=W.elementDims.rootMaxW;Y.outerHeight=W.elementDims.rootMaxH;W.rootDim=Y;W.maxCanvasHt=W.calcMaxCanvasHeight()};W.buildColumnDefsFromData=function(){W.config.columnDefs=[];var Y=W.data[0];if(!Y){W.lateBoundColumns=true;return}U.forIn(Y,function(aa,Z){if(W.config.excludeProperties.indexOf(Z)===-1){W.config.columnDefs.push({field:Z})}})};W.buildColumns=function(){var ab=W.config.columnDefs,aa=[];if(!ab){W.buildColumnDefsFromData();ab=W.config.columnDefs}if(W.config.showSelectionCheckbox){aa.push(new b({colDef:{field:"\u2714",width:W.elementDims.rowSelectedCellW,sortable:false,resizable:false,groupable:false,headerCellTemplate:M.get(V.gridId+"checkboxHeaderTemplate.html"),cellTemplate:M.get(V.gridId+"checkboxCellTemplate.html"),pinned:W.config.pinSelectionCheckbox},index:0,headerRowHeight:W.config.headerRowHeight,sortCallback:W.sortData,resizeOnDataCallback:W.resizeOnData,enableResize:W.config.enableColumnResize,enableSort:W.config.enableSorting,enablePinning:W.config.enablePinning},V,W,T,M,U))}if(ab.length>0){var Z=W.config.showSelectionCheckbox?1:0;var Y=V.configGroups.length;V.configGroups.length=0;angular.forEach(ab,function(af,ac){ac+=Z;var ad=new b({colDef:af,index:ac+Y,originalIndex:ac,headerRowHeight:W.config.headerRowHeight,sortCallback:W.sortData,resizeOnDataCallback:W.resizeOnData,enableResize:W.config.enableColumnResize,enableSort:W.config.enableSorting,enablePinning:W.config.enablePinning,enableCellEdit:W.config.enableCellEdit||W.config.enableCellEditOnFocus,cellEditableCondition:W.config.cellEditableCondition},V,W,T,M,U);var ae=W.config.groups.indexOf(af.field);if(ae!==-1){ad.isGroupedBy=true;V.configGroups.splice(ae,0,ad);ad.groupIndex=V.configGroups.length}aa.push(ad)});V.columns=aa;if(W.config.groups.length>0){W.rowFactory.getGrouping(W.config.groups)}}};W.configureColumnWidths=function(){var ad=[],ag=[],ae=0,ac=0;var af={};angular.forEach(V.columns,function(ak,ai){if(!U.isNullOrUndefined(ak.originalIndex)){var aj=ak.originalIndex;if(W.config.showSelectionCheckbox){if(ak.originalIndex===0&&ak.visible){ac+=W.config.selectionCheckboxColumnWidth}aj--}af[aj]=ai}else{if(ak.isAggCol&&ak.visible){ac+=25}}});angular.forEach(W.config.columnDefs,function(al,ak){var an=V.columns[af[ak]];al.index=ak;var am=false,aj;if(U.isNullOrUndefined(al.width)){al.width="*"}else{am=isNaN(al.width)?U.endsWith(al.width,"%"):false;aj=am?al.width:parseInt(al.width,10)}if(isNaN(aj)){aj=al.width;if(aj==="auto"){an.width=an.minWidth;ac+=an.width;var ai=an;V.$on("$destroy",V.$on("ngGridEventData",function(){W.resizeOnData(ai)}));return}else{if(aj.indexOf("*")!==-1){if(an.visible!==false){ae+=aj.length}ad.push(al);return}else{if(am){ag.push(al);return}else{throw'unable to parse column width, use percentage ("10%","20%", etc...) or "*" to use remaining width of grid'}}}}else{if(an.visible!==false){ac+=an.width=parseInt(an.width,10)}}});if(ag.length>0){W.config.maintainColumnRatios=W.config.maintainColumnRatios!==false;var ab=0;var ah=0;angular.forEach(ag,function(aj){var ak=V.columns[af[aj.index]];var ai=parseFloat(aj.width)/100;ab+=ai;if(!ak.visible){ah+=ai}});var Z=ab-ah;angular.forEach(ag,function(ak){var al=V.columns[af[ak.index]];var aj=parseFloat(ak.width)/100;if(ah>0){aj=aj/Z}else{aj=aj/ab}var ai=W.rootDim.outerWidth*ab;al.width=ai*aj;ac+=al.width})}if(ad.length>0){W.config.maintainColumnRatios=W.config.maintainColumnRatios!==false;var Y=W.rootDim.outerWidth-ac;if(W.maxCanvasHt>V.viewportDimHeight()){Y-=T.ScrollW}var aa=Math.floor(Y/ae);angular.forEach(ad,function(aj,ai){var am=V.columns[af[aj.index]];am.width=aa*aj.width.length;if(am.width<am.minWidth){am.width=am.minWidth}if(am.visible!==false){ac+=am.width}var ak=(ai===(ad.length-1));if(ak&&ac<W.rootDim.outerWidth){var al=W.rootDim.outerWidth-ac;if(W.maxCanvasHt>V.viewportDimHeight()){al-=T.ScrollW}am.width+=al}})}};W.init=function(){return W.initTemplates().then(function(){V.selectionProvider=new l(W,V,N,U);V.domAccessProvider=new r(W);W.rowFactory=new k(W,V,T,M,U);W.searchProvider=new F(V,W,R,U);W.styleProvider=new j(V,W);V.$on("$destroy",V.$watch("configGroups",function(Y){var Z=[];angular.forEach(Y,function(aa){Z.push(aa.field||aa)});W.config.groups=Z;W.rowFactory.filteredRowsChanged();V.$emit("ngGridEventGroups",Y)},true));V.$on("$destroy",V.$watch("columns",function(Y){if(!V.isColumnResizing){T.RebuildGrid(V,W)}V.$emit("ngGridEventColumns",Y)},true));V.$on("$destroy",V.$watch(function(){return X.i18n},function(Y){U.seti18n(V,Y)}));W.maxCanvasHt=W.calcMaxCanvasHeight();if(W.config.sortInfo.fields&&W.config.sortInfo.fields.length>0){V.$on("$destroy",V.$watch(function(){return W.config.sortInfo},function(Y){if(!O.isSorting){W.sortColumnsInit();V.$emit("ngGridEventSorted",W.config.sortInfo)}},true))}})};W.resizeOnData=function(Z){var aa=Z.minWidth;var Y=U.getElementsByClassName("col"+Z.index);angular.forEach(Y,function(af,ac){var ad;if(ac===0){var ae=y(af).find(".ngHeaderText");ad=U.visualLength(ae)+10}else{var ab=y(af).find(".ngCellText");ad=U.visualLength(ab)+10}if(ad>aa){aa=ad}});Z.width=Z.longest=Math.min(Z.maxWidth,aa+7);T.BuildStyles(V,W,true)};W.lastSortedColumns=[];W.sortData=function(aa,Y){if(Y&&Y.shiftKey&&W.config.sortInfo){var ac=W.config.sortInfo.columns.indexOf(aa);if(ac===-1){if(W.config.sortInfo.columns.length===1){W.config.sortInfo.columns[0].sortPriority=1}W.config.sortInfo.columns.push(aa);aa.sortPriority=W.config.sortInfo.columns.length;W.config.sortInfo.fields.push(aa.field);W.config.sortInfo.directions.push(aa.sortDirection);W.lastSortedColumns.push(aa)}else{W.config.sortInfo.directions[ac]=aa.sortDirection}V.$emit("ngGridEventSorted",W.config.sortInfo)}else{if(!W.config.useExternalSorting||(W.config.useExternalSorting&&W.config.sortInfo)){var ab=y.isArray(aa);W.config.sortInfo.columns.length=0;W.config.sortInfo.fields.length=0;W.config.sortInfo.directions.length=0;var Z=function(ad){W.config.sortInfo.columns.push(ad);W.config.sortInfo.fields.push(ad.field);W.config.sortInfo.directions.push(ad.sortDirection);W.lastSortedColumns.push(ad)};if(ab){angular.forEach(aa,function(ae,ad){ae.sortPriority=ad+1;Z(ae)})}else{W.clearSortingData(aa);aa.sortPriority=undefined;Z(aa)}W.sortActual();W.searchProvider.evalFilter();V.$emit("ngGridEventSorted",W.config.sortInfo)}}};W.sortColumnsInit=function(){if(W.config.sortInfo.columns){W.config.sortInfo.columns.length=0}else{W.config.sortInfo.columns=[]}var Y=[];angular.forEach(V.columns,function(aa){var Z=W.config.sortInfo.fields.indexOf(aa.field);if(Z!==-1){aa.sortDirection=W.config.sortInfo.directions[Z]||"asc";Y[Z]=aa}});if(Y.length===1){W.sortData(Y[0])}else{W.sortData(Y)}};W.sortActual=function(){if(!W.config.useExternalSorting){var Y=W.data.slice(0);angular.forEach(Y,function(ab,aa){var ac=W.rowMap[aa];if(ac!==undefined){var Z=W.rowCache[ac];if(Z!==undefined){ab.preSortSelected=Z.selected;ab.preSortIndex=aa}}});O.Sort(W.config.sortInfo,Y);angular.forEach(Y,function(aa,Z){W.rowCache[Z].entity=aa;W.rowCache[Z].selected=aa.preSortSelected;W.rowMap[aa.preSortIndex]=Z;delete aa.preSortSelected;delete aa.preSortIndex})}};W.clearSortingData=function(Y){if(!Y){angular.forEach(W.lastSortedColumns,function(Z){Z.sortDirection="";Z.sortPriority=null});W.lastSortedColumns=[]}else{angular.forEach(W.lastSortedColumns,function(Z){if(Y.index!==Z.index){Z.sortDirection="";Z.sortPriority=null}});W.lastSortedColumns[0]=Y;W.lastSortedColumns.length=1}};W.fixColumnIndexes=function(){for(var Y=0;Y<V.columns.length;Y++){V.columns[Y].index=Y}};W.fixGroupIndexes=function(){angular.forEach(V.configGroups,function(Z,Y){Z.groupIndex=Y+1})};V.elementsNeedMeasuring=true;V.columns=[];V.renderedRows=[];V.renderedColumns=[];V.headerRow=null;V.rowHeight=W.config.rowHeight;V.jqueryUITheme=W.config.jqueryUITheme;V.showSelectionCheckbox=W.config.showSelectionCheckbox;V.enableCellSelection=W.config.enableCellSelection;V.enableCellEditOnFocus=W.config.enableCellEditOnFocus;V.footer=null;V.selectedItems=W.config.selectedItems;V.multiSelect=W.config.multiSelect;V.showFooter=W.config.showFooter;V.footerRowHeight=V.showFooter?W.config.footerRowHeight:0;V.showColumnMenu=W.config.showColumnMenu;V.forceSyncScrolling=W.config.forceSyncScrolling;V.showMenu=false;V.configGroups=[];V.gridId=W.gridId;V.enablePaging=W.config.enablePaging;V.pagingOptions=W.config.pagingOptions;V.i18n={};U.seti18n(V,W.config.i18n);V.adjustScrollLeft=function(ad){var aj=0,Z=0,ag=V.columns.length,ae=[],aa=!W.config.enableColumnHeavyVirt;var Y=0;var ac=function(ak){if(aa){ae.push(ak)}else{if(!V.renderedColumns[Y]){V.renderedColumns[Y]=ak.copy()}else{V.renderedColumns[Y].setVars(ak)}}Y++};for(var af=0;af<ag;af++){var ab=V.columns[af];if(ab.visible!==false){var ai=ab.width+aj;if(ab.pinned){ac(ab);var ah=af>0?(ad+Z):ad;T.setColLeft(ab,ah,W);Z+=ab.width}else{if(ai>=ad){if(aj<=ad+W.rootDim.outerWidth){ac(ab)}}}aj+=ab.width}}if(aa){V.renderedColumns=ae}};W.prevScrollTop=0;W.prevScrollIndex=0;V.adjustScrollTop=function(ab,aa){if(W.prevScrollTop===ab&&!aa){return}if(ab>0&&W.$viewport[0].scrollHeight-ab<=W.$viewport.outerHeight()){V.$emit("ngGridEventScroll")}var ac=Math.floor(ab/W.config.rowHeight);var Z;if(W.filteredRows.length>W.config.virtualizationThreshold){if(W.prevScrollTop<ab&&ac<W.prevScrollIndex+f){return}if(W.prevScrollTop>ab&&ac>W.prevScrollIndex-f){return}Z=new m(Math.max(0,ac-A),ac+W.minRowsToRender()+A)}else{var Y=V.configGroups.length>0?W.rowFactory.parsedData.length:W.filteredRows.length;Z=new m(0,Math.max(Y,W.minRowsToRender()+A))}W.prevScrollTop=ab;W.rowFactory.UpdateViewableRange(Z);W.prevScrollIndex=ac};V.toggleShowMenu=function(){V.showMenu=!V.showMenu};V.toggleSelectAll=function(Z,Y){V.selectionProvider.toggleSelectAll(Z,false,Y)};V.totalFilteredItemsLength=function(){return W.filteredRows.length};V.showGroupPanel=function(){return W.config.showGroupPanel};V.topPanelHeight=function(){return W.config.showGroupPanel===true?W.config.headerRowHeight+32:W.config.headerRowHeight};V.viewportDimHeight=function(){return Math.max(0,W.rootDim.outerHeight-V.topPanelHeight()-V.footerRowHeight-2)};V.groupBy=function(Y){if(W.data.length<1||!Y.groupable||!Y.field){return}if(!Y.sortDirection){Y.sort({shiftKey:V.configGroups.length>0?true:false})}var Z=V.configGroups.indexOf(Y);if(Z===-1){Y.isGroupedBy=true;V.configGroups.push(Y);Y.groupIndex=V.configGroups.length}else{V.removeGroup(Z)}W.$viewport.scrollTop(0);T.digest(V)};V.removeGroup=function(Z){var Y=V.columns.filter(function(aa){return aa.groupIndex===(Z+1)})[0];Y.isGroupedBy=false;Y.groupIndex=0;if(V.columns[Z].isAggCol){V.columns.splice(Z,1);V.configGroups.splice(Z,1);W.fixGroupIndexes()}if(V.configGroups.length===0){W.fixColumnIndexes();T.digest(V)}V.adjustScrollLeft(0)};V.togglePin=function(Y){var aa=Y.index;var ab=0;for(var Z=0;Z<V.columns.length;Z++){if(!V.columns[Z].pinned){break}ab++}if(Y.pinned){ab=Math.max(Y.originalIndex,ab-1)}Y.pinned=!Y.pinned;V.columns.splice(aa,1);V.columns.splice(ab,0,Y);W.fixColumnIndexes();T.BuildStyles(V,W,true);W.$viewport.scrollLeft(W.$viewport.scrollLeft()-Y.width)};V.totalRowWidth=function(){var Y=0,aa=V.columns;for(var Z=0;Z<aa.length;Z++){if(aa[Z].visible!==false){Y+=aa[Z].width}}return Y};V.headerScrollerDim=function(){var Z=V.viewportDimHeight(),aa=W.maxCanvasHt,ab=(aa>Z),Y=new s();Y.autoFitHeight=true;Y.outerWidth=V.totalRowWidth();if(ab){Y.outerWidth+=W.elementDims.scrollW}else{if((aa-Z)<=W.elementDims.scrollH){Y.outerWidth+=W.elementDims.scrollW}}return Y}};var m=function(M,L){this.topRow=M;this.bottomRow=L};var e=function(L,M,N,P,O){this.entity=L;this.config=M;this.selectionProvider=N;this.rowIndex=P;this.utils=O;this.selected=N.getSelection(L);this.cursor=this.config.enableRowSelection&&!this.config.selectWithCheckboxOnly?"pointer":"default";this.beforeSelectionChange=M.beforeSelectionChangeCallback;this.afterSelectionChange=M.afterSelectionChangeCallback;this.offsetTop=this.rowIndex*M.rowHeight;this.rowDisplayIndex=0};e.prototype.setSelection=function(L){this.selectionProvider.setSelection(this,L);this.selectionProvider.lastClickedRow=this};e.prototype.continueSelection=function(L){this.selectionProvider.ChangeSelection(this,L)};e.prototype.ensureEntity=function(L){if(this.entity!==L){this.entity=L;this.selected=this.selectionProvider.getSelection(this.entity)}};e.prototype.toggleSelected=function(M){if(!this.config.enableRowSelection&&!this.config.enableCellSelection){return true}var L=M.target||M;if(L.type==="checkbox"&&L.parentElement.className!=="ngSelectionCell ng-scope"){return true}if(this.config.selectWithCheckboxOnly&&L.type!=="checkbox"){this.selectionProvider.lastClickedRow=this;return true}if(this.beforeSelectionChange(this,M)){this.continueSelection(M)}return false};e.prototype.alternatingRowClass=function(){var M=(this.rowIndex%2)===0;var L={ngRow:true,selected:this.selected,even:M,odd:!M,"ui-state-default":this.config.jqueryUITheme&&M,"ui-state-active":this.config.jqueryUITheme&&!M};return L};e.prototype.getProperty=function(L){return this.utils.evalProperty(this.entity,L)};e.prototype.copy=function(){this.clone=new e(this.entity,this.config,this.selectionProvider,this.rowIndex,this.utils);this.clone.isClone=true;this.clone.elm=this.elm;this.clone.orig=this;return this.clone};e.prototype.setVars=function(L){L.clone=this;this.entity=L.entity;this.selected=L.selected;this.orig=L};var k=function(P,O,N,L,Q){var M=this;M.aggCache={};M.parentCache=[];M.dataChanged=true;M.parsedData=[];M.rowConfig={};M.selectionProvider=O.selectionProvider;M.rowHeight=30;M.numberOfAggregates=0;M.groupedData=undefined;M.rowHeight=P.config.rowHeight;M.rowConfig={enableRowSelection:P.config.enableRowSelection,rowClasses:P.config.rowClasses,selectedItems:O.selectedItems,selectWithCheckboxOnly:P.config.selectWithCheckboxOnly,beforeSelectionChangeCallback:P.config.beforeSelectionChange,afterSelectionChangeCallback:P.config.afterSelectionChange,jqueryUITheme:P.config.jqueryUITheme,enableCellSelection:P.config.enableCellSelection,rowHeight:P.config.rowHeight};M.renderedRange=new m(0,P.minRowsToRender()+A);M.buildEntityRow=function(R,S){return new e(R,M.rowConfig,M.selectionProvider,S,Q)};M.buildAggregateRow=function(T,S){var R=M.aggCache[T.aggIndex];if(!R){R=new D(T,M,M.rowConfig.rowHeight,P.config.groupsCollapsedByDefault);M.aggCache[T.aggIndex]=R}R.rowIndex=S;R.offsetTop=S*M.rowConfig.rowHeight;return R};M.UpdateViewableRange=function(R){M.renderedRange=R;M.renderedChange()};M.filteredRowsChanged=function(){if(P.lateBoundColumns&&P.filteredRows.length>0){P.config.columnDefs=undefined;P.buildColumns();P.lateBoundColumns=false;O.$evalAsync(function(){O.adjustScrollLeft(0)})}M.dataChanged=true;if(P.config.groups.length>0){M.getGrouping(P.config.groups)}M.UpdateViewableRange(M.renderedRange)};M.renderedChange=function(){if(!M.groupedData||P.config.groups.length<1){M.renderedChangeNoGroups();P.refreshDomSizes();return}M.wasGrouped=true;M.parentCache=[];var R=0;var S=M.parsedData.filter(function(V){if(V.isAggRow){if(V.parent&&V.parent.collapsed){return false}return true}if(!V[G]){V.rowIndex=R++}return !V[G]});M.totalRows=S.length;var U=[];for(var T=M.renderedRange.topRow;T<M.renderedRange.bottomRow;T++){if(S[T]){S[T].offsetTop=T*P.config.rowHeight;U.push(S[T])}}P.setRenderedRows(U)};M.renderedChangeNoGroups=function(){var S=[];for(var R=M.renderedRange.topRow;R<M.renderedRange.bottomRow;R++){if(P.filteredRows[R]){P.filteredRows[R].rowIndex=R;P.filteredRows[R].offsetTop=R*P.config.rowHeight;S.push(P.filteredRows[R])}}P.setRenderedRows(S)};M.fixRowCache=function(){var S=P.data.length;var T=S-P.rowCache.length;if(T<0){P.rowCache.length=P.rowMap.length=S}else{for(var R=P.rowCache.length;R<S;R++){P.rowCache[R]=P.rowFactory.buildEntityRow(P.data[R],R)}}};M.parseGroupData=function(T){if(T.values){for(var S=0;S<T.values.length;S++){M.parentCache[M.parentCache.length-1].children.push(T.values[S]);M.parsedData.push(T.values[S])}}else{for(var U in T){if(U===v||U===t||U===n){continue}else{if(T.hasOwnProperty(U)){var R=M.buildAggregateRow({gField:T[v],gLabel:U,gDepth:T[t],isAggRow:true,_ng_hidden_:false,children:[],aggChildren:[],aggIndex:M.numberOfAggregates,aggLabelFilter:T[n].aggLabelFilter},0);M.numberOfAggregates++;R.parent=M.parentCache[R.depth-1];if(R.parent){R.parent.collapsed=false;R.parent.aggChildren.push(R)}M.parsedData.push(R);M.parentCache[R.depth]=R;M.parseGroupData(T[U])}}}}};M.getGrouping=function(W){M.aggCache=[];M.numberOfAggregates=0;M.groupedData={};var ad=P.filteredRows,T=W.length,aa=O.columns;function S(af,ae){return af.filter(function(ag){return ag.field===ae})}for(var ab=0;ab<ad.length;ab++){var X=ad[ab].entity;if(!X){return}ad[ab][G]=P.config.groupsCollapsedByDefault;var R=M.groupedData;for(var Z=0;Z<W.length;Z++){var ac=W[Z];var V=S(aa,ac)[0];var U=Q.evalProperty(X,ac);U=(U===""||U===null)?"null":U.toString();if(!R[U]){R[U]={}}if(!R[v]){R[v]=ac}if(!R[t]){R[t]=Z}if(!R[n]){R[n]=V}R=R[U]}if(!R.values){R.values=[]}R.values.push(ad[ab])}if(aa.length>0){for(var Y=0;Y<W.length;Y++){if(!aa[Y].isAggCol&&Y<=T){aa.splice(0,0,new b({colDef:{field:"",width:25,sortable:false,resizable:false,headerCellTemplate:'<div class="ngAggHeader"></div>',pinned:P.config.pinSelectionCheckbox},enablePinning:P.config.enablePinning,isAggCol:true,headerRowHeight:P.config.headerRowHeight},O,P,N,L,Q))}}}P.fixColumnIndexes();O.adjustScrollLeft(0);M.parsedData.length=0;M.parseGroupData(M.groupedData);M.fixRowCache()};if(P.config.groups.length>0&&P.filteredRows.length>0){M.getGrouping(P.config.groups)}};var F=function(W,L,U,V){var Y=this,P=[];Y.extFilter=L.config.filterOptions.useExternalFilter;W.showFilter=L.config.showFilter;W.filterText="";Y.fieldMap={};var T=function(aa){var Z={};for(var ab in aa){if(aa.hasOwnProperty(ab)){Z[ab.toLowerCase()]=aa[ab]}}return Z};var O=function(aa){if(typeof aa==="object"){var Z=[];for(var ab in aa){Z=Z.concat(O(aa[ab]))}return Z}else{return[aa]}};var R=function(ab,ah,ac){var aj;for(var aa in ah){if(ah.hasOwnProperty(aa)){var af=ac[aa.toLowerCase()];var Z=ah[aa];if(typeof Z==="object"&&!(Z instanceof Date)){var ag=T(af);aj=R(ab,Z,ag);if(aj){return true}}else{var ad=null,ai=null;if(af&&af.cellFilter){ai=af.cellFilter.split(":");ad=U(ai[0])}if(Z!==null&&Z!==undefined){if(typeof ad==="function"){var ae=ad(Z,ai[1]?ai[1].slice(1,-1):"").toString();aj=ab.regex.test(ae)}else{aj=ab.regex.test(Z.toString())}if(aj){return true}}}}}return false};var Q=function(ad,ah){var ai;var ac=Y.fieldMap[ad.columnDisplay];if(!ac){return false}var aa=ac.cellFilter.split(":");var ab=ac.cellFilter?U(aa[0]):null;var af=ah[ad.column]||ah[ac.field.split(".")[0]]||V.evalProperty(ah,ac.field);if(af===null||af===undefined){return false}if(typeof ab==="function"){var ag=ab(typeof af==="object"?M(af,ac.field):af,aa[1]).toString();ai=ad.regex.test(ag)}else{var ae=O(M(af,ac.field));for(var Z in ae){ai|=ad.regex.test(ae[Z])}}if(ai){return true}return false};var S=function(ac){for(var ab=0,aa=P.length;ab<aa;ab++){var ad=P[ab];var Z;if(!ad.column){Z=R(ad,ac,Y.fieldMap)}else{Z=Q(ad,ac)}if(!Z){return false}}return true};Y.evalFilter=function(){if(P.length===0){L.filteredRows=L.rowCache}else{L.filteredRows=L.rowCache.filter(function(aa){return S(aa.entity)})}for(var Z=0;Z<L.filteredRows.length;Z++){L.filteredRows[Z].rowIndex=Z}L.rowFactory.filteredRowsChanged()};var M=function(ae,aa){if(typeof ae!=="object"||typeof aa!=="string"){return ae}var ab=aa.split(".");var ad=ae;if(ab.length>1){for(var ac=1,Z=ab.length;ac<Z;ac++){ad=ad[ab[ac]];if(!ad){return ae}}return ad}return ae};var N=function(ab,Z){try{return new RegExp(ab,Z)}catch(aa){return new RegExp(ab.replace(/(\^|\$|\(|\)|<|>|\[|\]|\{|\}|\\|\||\.|\*|\+|\?)/g,"\\$1"))}};var X=function(Z){P=[];var ae;if(!(ae=y.trim(Z))){return}var ab=ae.split(";");for(var ad=0;ad<ab.length;ad++){var ac=ab[ad].split(":");if(ac.length>1){var aa=y.trim(ac[0]);var ag=y.trim(ac[1]);if(aa&&ag){P.push({column:aa,columnDisplay:aa.replace(/\s+/g,"").toLowerCase(),regex:N(ag,"i")})}}else{var af=y.trim(ac[0]);if(af){P.push({column:"",regex:N(af,"i")})}}}};if(!Y.extFilter){W.$on("$destroy",W.$watch("columns",function(ae){for(var ad=0;ad<ae.length;ad++){var ab=ae[ad];if(ab.field){if(ab.field.match(/\./g)){var ac=ab.field.split(".");var aa=Y.fieldMap;for(var Z=0;Z<ac.length-1;Z++){aa[ac[Z]]=aa[ac[Z]]||{};aa=aa[ac[Z]]}aa[ac[ac.length-1]]=ab}else{Y.fieldMap[ab.field.toLowerCase()]=ab}}if(ab.displayName){Y.fieldMap[ab.displayName.toLowerCase().replace(/\s+/g,"")]=ab}}}))}W.$on("$destroy",W.$watch(function(){return L.config.filterOptions.filterText},function(Z){W.filterText=Z}));W.$on("$destroy",W.$watch("filterText",function(Z){if(!Y.extFilter){W.$emit("ngGridEventFilter",Z);X(Z);Y.evalFilter()}}))};var l=function(N,M,O,P){var L=this;L.multi=N.config.multiSelect;L.selectedItems=N.config.selectedItems;L.selectedIndex=N.config.selectedIndex;L.lastClickedRow=undefined;L.ignoreSelectedItemChanges=false;var Q=N.config.primaryKey;if(Q){Q=P.preEval("entity."+N.config.primaryKey)}L.pKeyParser=O(Q);L.ChangeSelection=function(Z,aa){var ab=aa.which||aa.keyCode;var U=(ab===40||ab===38);if(aa&&aa.shiftKey&&!aa.keyCode&&L.multi&&N.config.enableRowSelection){if(L.lastClickedRow){var R;if(M.configGroups.length>0){R=N.rowFactory.parsedData.filter(function(ad){return !ad.isAggRow})}else{R=N.filteredRows}var W=Z.rowIndex;var S=L.lastClickedRowIndex;if(W===S){return false}if(W<S){W=W^S;S=W^S;W=W^S;W--}else{S++}var ac=[];for(;S<=W;S++){ac.push(R[S])}if(ac[ac.length-1].beforeSelectionChange(ac,aa)){for(var T=0;T<ac.length;T++){var Y=ac[T];var X=Y.selected;Y.selected=!X;if(Y.clone){Y.clone.selected=Y.selected}var V=L.selectedItems.indexOf(Y.entity);if(V===-1){L.selectedItems.push(Y.entity)}else{L.selectedItems.splice(V,1)}}ac[ac.length-1].afterSelectionChange(ac,aa)}L.lastClickedRow=Z;L.lastClickedRowIndex=Z.rowIndex;return true}}else{if(!L.multi){if(L.lastClickedRow===Z){L.setSelection(L.lastClickedRow,N.config.keepLastSelected?true:!Z.selected)}else{if(L.lastClickedRow){L.setSelection(L.lastClickedRow,false)}L.setSelection(Z,!Z.selected)}}else{if(!aa.keyCode||U&&!N.config.selectWithCheckboxOnly){L.setSelection(Z,!Z.selected)}}}L.lastClickedRow=Z;L.lastClickedRowIndex=Z.rowIndex;return true};L.getSelection=function(R){return L.getSelectionIndex(R)!==-1};L.getSelectionIndex=function(R){var S=-1;if(N.config.primaryKey){var T=L.pKeyParser({entity:R});angular.forEach(L.selectedItems,function(V,U){if(T===L.pKeyParser({entity:V})){S=U}})}else{S=L.selectedItems.indexOf(R)}return S};L.setSelection=function(T,R){if(N.config.enableRowSelection){if(!R){var S=L.getSelectionIndex(T.entity);if(S!==-1){L.selectedItems.splice(S,1)}}else{if(L.getSelectionIndex(T.entity)===-1){if(!L.multi&&L.selectedItems.length>0){L.toggleSelectAll(false,true)}L.selectedItems.push(T.entity)}}T.selected=R;if(T.orig){T.orig.selected=R}if(T.clone){T.clone.selected=R}T.afterSelectionChange(T)}};L.toggleSelectAll=function(R,X,U){var W=U?N.filteredRows:N.rowCache,V,S;if(X||N.config.beforeSelectionChange(W,R)){if(!U&&L.selectedItems.length>0){L.selectedItems.length=0}for(var T=0;T<W.length;T++){V=W[T].selected;W[T].selected=R;if(W[T].clone){W[T].clone.selected=R}if(!V&&R){L.selectedItems.push(W[T].entity)}else{if(V&&!R){S=L.getSelectionIndex(W[T].entity);if(S>-1){L.selectedItems.splice(S,1)}}}}if(!X){N.config.afterSelectionChange(W,R)}}}};var j=function(L,M){L.headerCellStyle=function(N){return{height:N.headerRowHeight+"px"}};L.rowStyle=function(O){var N={top:O.offsetTop+"px",height:L.rowHeight+"px"};if(O.isAggRow){N.left=O.offsetLeft}return N};L.canvasStyle=function(){return{height:M.maxCanvasHt+"px"}};L.headerScrollerStyle=function(){return{height:M.config.headerRowHeight+"px"}};L.topPanelStyle=function(){return{width:M.rootDim.outerWidth+"px",height:L.topPanelHeight()+"px"}};L.headerStyle=function(){return{width:M.rootDim.outerWidth+"px",height:M.config.headerRowHeight+"px"}};L.groupPanelStyle=function(){return{width:M.rootDim.outerWidth+"px",height:"32px"}};L.viewportStyle=function(){return{width:M.rootDim.outerWidth+"px",height:L.viewportDimHeight()+"px"}};L.footerStyle=function(){return{width:M.rootDim.outerWidth+"px",height:L.footerRowHeight+"px"}}};i.directive("ngCellHasFocus",["$domUtilityService",function(L){var M=function(N,O){N.isFocused=true;L.digest(N);N.$broadcast("ngGridEventStartCellEdit");N.$emit("ngGridEventStartCellEdit");N.$on("$destroy",N.$on("ngGridEventEndCellEdit",function(){N.isFocused=false;L.digest(N)}))};return function(T,R){var O=false;var S=false;T.editCell=function(){if(!T.enableCellEditOnFocus){setTimeout(function(){M(T,R)},0)}};function N(W){if(T.enableCellEditOnFocus){S=true}else{R.focus()}return true}function U(W){if(T.enableCellEditOnFocus){W.preventDefault();S=false;M(T,R)}}R.bind("mousedown",N);R.bind("click",U);function V(W){O=true;if(T.enableCellEditOnFocus&&!S){M(T,R)}return true}R.bind("focus",V);function P(){O=false;return true}R.bind("blur",P);function Q(W){if(!T.enableCellEditOnFocus){if(O&&W.keyCode!==37&&W.keyCode!==38&&W.keyCode!==39&&W.keyCode!==40&&W.keyCode!==9&&!W.shiftKey&&W.keyCode!==13){M(T,R)}if(O&&W.shiftKey&&(W.keyCode>=65&&W.keyCode<=90)){M(T,R)}if(W.keyCode===27){R.focus()}}return true}R.bind("keydown",Q);R.on("$destroy",function(){R.off("mousedown",N);R.off("click",U);R.off("focus",V);R.off("blur",P);R.off("keydown",Q)})}}]);i.directive("ngCellText",function(){return function(N,O){function M(P){P.preventDefault()}O.bind("mouseover",M);function L(P){P.preventDefault()}O.bind("mouseleave",L);O.on("$destroy",function(){O.off("mouseover",M);O.off("mouseleave",L)})}});i.directive("ngCell",["$compile","$domUtilityService","$utilityService",function(O,M,N){var L={scope:false,compile:function(){return{pre:function(Q,T){var R;var S=Q.col.cellTemplate.replace(h,N.preEval("row.entity."+Q.col.field));if(Q.col.enableCellEdit){R=Q.col.cellEditTemplate;R=R.replace(q,Q.col.cellEditableCondition);R=R.replace(a,S);R=R.replace(K,Q.col.editableCellTemplate.replace(h,N.preEval("row.entity."+Q.col.field)))}else{R=S}var P=y(R);T.append(P);O(P)(Q);if(Q.enableCellSelection&&P[0].className.indexOf("ngSelectionCell")===-1){P[0].setAttribute("tabindex",0);P.addClass("ngCellElement")}},post:function(P,Q){if(P.enableCellSelection){P.domAccessProvider.selectionHandlers(P,Q)}P.$on("$destroy",P.$on("ngGridEventDigestCell",function(){M.digest(P)}))}}}};return L}]);i.directive("ngEditCellIf",[function(){return{transclude:"element",priority:1000,terminal:true,restrict:"A",compile:function(N,L,M){return function(S,R,O){var Q;var P;S.$on("$destroy",S.$watch(O.ngEditCellIf,function(T){if(Q){Q.remove();Q=undefined}if(P){P.$destroy();P=undefined}if(T){P=S.$new();M(P,function(U){Q=U;R.after(U)})}}))}}}}]);i.directive("ngGridFooter",["$compile","$templateCache",function(N,L){var M={scope:false,compile:function(){return{pre:function(O,P){if(P.children().length===0){P.append(N(L.get(O.gridId+"footerTemplate.html"))(O))}}}}};return M}]);i.directive("ngGridMenu",["$compile","$templateCache",function(N,L){var M={scope:false,compile:function(){return{pre:function(O,P){if(P.children().length===0){P.append(N(L.get(O.gridId+"menuTemplate.html"))(O))}}}}};return M}]);i.directive("ngGrid",["$compile","$filter","$templateCache","$sortService","$domUtilityService","$utilityService","$timeout","$parse","$http","$q",function(Q,S,M,N,U,V,L,O,T,R){var P={scope:true,compile:function(){return{pre:function(X,ac,aa){var W=y(ac);var Y=X.$eval(aa.ngGrid);Y.gridDim=new s({outerHeight:y(W).height(),outerWidth:y(W).width()});var Z=new g(X,Y,N,U,S,M,V,L,O,T,R);X.$on("$destroy",function ab(){Y.gridDim=null;Y.selectRow=null;Y.selectItem=null;Y.selectAll=null;Y.selectVisible=null;Y.groupBy=null;Y.sortBy=null;Y.gridId=null;Y.ngGrid=null;Y.$gridScope=null;Y.$gridServices=null;X.domAccessProvider.grid=null;angular.element(Z.styleSheet).remove();Z.styleSheet=null});return Z.init().then(function(){if(typeof Y.columnDefs==="string"){X.$on("$destroy",X.$parent.$watch(Y.columnDefs,function(ae){if(!ae){Z.refreshDomSizes();Z.buildColumns();return}Z.lateBoundColumns=false;X.columns=[];Z.config.columnDefs=ae;Z.buildColumns();Z.eventProvider.assignEvents();U.RebuildGrid(X,Z)},true))}else{Z.buildColumns()}if(typeof Y.totalServerItems==="string"){X.$on("$destroy",X.$parent.$watch(Y.totalServerItems,function(af,ae){if(!angular.isDefined(af)){X.totalServerItems=0}else{X.totalServerItems=af}}))}else{X.totalServerItems=0}if(typeof Y.data==="string"){var ad=function(ae){Z.data=y.extend([],ae);Z.rowFactory.fixRowCache();angular.forEach(Z.data,function(ah,af){var ag=Z.rowMap[af]||af;if(Z.rowCache[ag]){Z.rowCache[ag].ensureEntity(ah)}Z.rowMap[ag]=af});Z.searchProvider.evalFilter();Z.configureColumnWidths();Z.refreshDomSizes();if(Z.config.sortInfo.fields.length>0){Z.sortColumnsInit();X.$emit("ngGridEventSorted",Z.config.sortInfo)}X.$emit("ngGridEventData",Z.gridId)};X.$on("$destroy",X.$parent.$watch(Y.data,ad));X.$on("$destroy",X.$parent.$watch(Y.data+".length",function(){ad(X.$eval(Y.data));X.adjustScrollTop(Z.$viewport.scrollTop(),true)}))}Z.footerController=new u(X,Z);ac.addClass("ngGrid").addClass(Z.gridId.toString());if(!Y.enableHighlighting){ac.addClass("unselectable")}if(Y.jqueryUITheme){ac.addClass("ui-widget")}ac.append(Q(M.get("gridTemplate.html"))(X));U.AssignGridContainers(X,ac,Z);Z.eventProvider=new w(Z,X,U,L);Y.selectRow=function(af,ae){if(Z.rowCache[af]){if(Z.rowCache[af].clone){Z.rowCache[af].clone.setSelection(ae?true:false)}Z.rowCache[af].setSelection(ae?true:false)}};Y.selectItem=function(ae,af){Y.selectRow(Z.rowMap[ae],af)};Y.selectAll=function(ae){X.toggleSelectAll(ae)};Y.selectVisible=function(ae){X.toggleSelectAll(ae,true)};Y.groupBy=function(af){if(af){X.groupBy(X.columns.filter(function(ag){return ag.field===af})[0])}else{var ae=y.extend(true,[],X.configGroups);angular.forEach(ae,X.groupBy)}};Y.sortBy=function(af){var ae=X.columns.filter(function(ag){return ag.field===af})[0];if(ae){ae.sort()}};Y.gridId=Z.gridId;Y.ngGrid=Z;Y.$gridScope=X;Y.$gridServices={SortService:N,DomUtilityService:U,UtilityService:V};X.$on("$destroy",X.$on("ngGridEventDigestGrid",function(){U.digest(X.$parent)}));X.$on("$destroy",X.$on("ngGridEventDigestGridParent",function(){U.digest(X.$parent)}));X.$evalAsync(function(){X.adjustScrollLeft(0)});angular.forEach(Y.plugins,function(af){if(typeof af==="function"){af=new af()}var ae=X.$new();af.init(ae,Z,Y.$gridServices);Y.plugins[V.getInstanceType(af)]=af;X.$on("$destroy",function(){ae.$destroy()})});if(typeof Y.init==="function"){Y.init(Z,X)}return null})}}}};return P}]);i.directive("ngHeaderCell",["$compile",function(L){var M={scope:false,compile:function(){return{pre:function(N,O){O.append(L(N.col.headerCellTemplate)(N))}}}};return M}]);i.directive("ngHeaderRow",["$compile","$templateCache",function(M,L){var N={scope:false,compile:function(){return{pre:function(O,P){if(P.children().length===0){P.append(M(L.get(O.gridId+"headerRowTemplate.html"))(O))}}}}};return N}]);i.directive("ngInput",[function(){return{require:"ngModel",link:function(T,Q,R,P){var N;var M=T.$watch("ngModel",function(){N=P.$modelValue;M()});function O(U){switch(U.keyCode){case 37:case 38:case 39:case 40:U.stopPropagation();break;case 27:if(!T.$$phase){T.$apply(function(){P.$setViewValue(N);Q.blur()})}break;case 13:if(T.enableCellEditOnFocus&&T.totalFilteredItemsLength()-1>T.row.rowIndex&&T.row.rowIndex>0||T.col.enableCellEdit){Q.blur()}break}return true}Q.bind("keydown",O);function S(U){U.stopPropagation()}Q.bind("click",S);function L(U){U.stopPropagation()}Q.bind("mousedown",L);Q.on("$destroy",function(){Q.off("keydown",O);Q.off("click",S);Q.off("mousedown",L)});T.$on("$destroy",T.$on("ngGridEventStartCellEdit",function(){Q.focus();Q.select()}));angular.element(Q).bind("blur",function(){T.$emit("ngGridEventEndCellEdit")})}}}]);i.directive("ngRow",["$compile","$domUtilityService","$templateCache",function(O,M,L){var N={scope:false,compile:function(){return{pre:function(P,R){P.row.elm=R;if(P.row.clone){P.row.clone.elm=R}if(P.row.isAggRow){var Q=L.get(P.gridId+"aggregateTemplate.html");if(P.row.aggLabelFilter){Q=Q.replace(o,"| "+P.row.aggLabelFilter)}else{Q=Q.replace(o,"")}R.append(O(Q)(P))}else{R.append(O(L.get(P.gridId+"rowTemplate.html"))(P))}P.$on("$destroy",P.$on("ngGridEventDigestRow",function(){M.digest(P)}))}}}};return N}]);i.directive("ngViewport",[function(){return function(S,O){var P;var L;var T=0;var N=function(){if(!S.$root.$$phase){S.$digest()}};var M;function Q(U){var W=U.target.scrollLeft,V=U.target.scrollTop;if(S.$headerContainer){S.$headerContainer.scrollLeft(W)}S.adjustScrollLeft(W);S.adjustScrollTop(V);if(S.forceSyncScrolling){N()}else{clearTimeout(M);M=setTimeout(N,150)}L=W;T=V;P=false;return true}O.bind("scroll",Q);function R(){P=true;if(O.focus){O.focus()}return true}O.bind("mousewheel DOMMouseScroll",R);O.on("$destroy",function(){O.off("scroll",Q);O.off("mousewheel DOMMouseScroll",R)});if(!S.enableCellSelection){S.domAccessProvider.selectionHandlers(S,O)}}}]);E.ngGrid.i18n.da={ngAggregateLabel:"artikler",ngGroupPanelDescription:"Grupér rækker udfra en kolonne ved at trække dens overskift hertil.",ngSearchPlaceHolder:"Søg...",ngMenuText:"Vælg kolonner:",ngShowingItemsLabel:"Viste rækker:",ngTotalItemsLabel:"Rækker totalt:",ngSelectedItemsLabel:"Valgte rækker:",ngPageSizeLabel:"Side størrelse:",ngPagerFirstTitle:"Første side",ngPagerNextTitle:"Næste side",ngPagerPrevTitle:"Forrige side",ngPagerLastTitle:"Sidste side"};E.ngGrid.i18n.de={ngAggregateLabel:"eintrag",ngGroupPanelDescription:"Ziehen Sie eine Spaltenüberschrift hierhin um nach dieser Spalte zu gruppieren.",ngSearchPlaceHolder:"Suche...",ngMenuText:"Spalten auswählen:",ngShowingItemsLabel:"Zeige Einträge:",ngTotalItemsLabel:"Einträge gesamt:",ngSelectedItemsLabel:"Ausgewählte Einträge:",ngPageSizeLabel:"Einträge pro Seite:",ngPagerFirstTitle:"Erste Seite",ngPagerNextTitle:"Nächste Seite",ngPagerPrevTitle:"Vorherige Seite",ngPagerLastTitle:"Letzte Seite"};E.ngGrid.i18n.en={ngAggregateLabel:"items",ngGroupPanelDescription:"Drag a column header here and drop it to group by that column.",ngSearchPlaceHolder:"Search...",ngMenuText:"Choose Columns:",ngShowingItemsLabel:"Showing Items:",ngTotalItemsLabel:"Total Items:",ngSelectedItemsLabel:"Selected Items:",ngPageSizeLabel:"Page Size:",ngPagerFirstTitle:"First Page",ngPagerNextTitle:"Next Page",ngPagerPrevTitle:"Previous Page",ngPagerLastTitle:"Last Page"};E.ngGrid.i18n.es={ngAggregateLabel:"Artículos",ngGroupPanelDescription:"Arrastre un encabezado de columna aquí y soltarlo para agrupar por esa columna.",ngSearchPlaceHolder:"Buscar...",ngMenuText:"Elegir columnas:",ngShowingItemsLabel:"Artículos Mostrando:",ngTotalItemsLabel:"Artículos Totales:",ngSelectedItemsLabel:"Artículos Seleccionados:",ngPageSizeLabel:"Tamaño de Página:",ngPagerFirstTitle:"Primera Página",ngPagerNextTitle:"Página Siguiente",ngPagerPrevTitle:"Página Anterior",ngPagerLastTitle:"Última Página"};E.ngGrid.i18n.fa={ngAggregateLabel:"موردها",ngGroupPanelDescription:"یک عنوان ستون اینجا را بردار و به گروهی از آن ستون بیانداز.",ngSearchPlaceHolder:"جستجو...",ngMenuText:"انتخاب ستون\u200cها:",ngShowingItemsLabel:"نمایش موردها:",ngTotalItemsLabel:"همهٔ موردها:",ngSelectedItemsLabel:"موردهای انتخاب\u200cشده:",ngPageSizeLabel:"اندازهٔ صفحه:",ngPagerFirstTitle:"صفحهٔ اول",ngPagerNextTitle:"صفحهٔ بعد",ngPagerPrevTitle:"صفحهٔ قبل",ngPagerLastTitle:"آخرین صفحه"};E.ngGrid.i18n.fr={ngAggregateLabel:"articles",ngGroupPanelDescription:"Faites glisser un en-tête de colonne ici et déposez-le vers un groupe par cette colonne.",ngSearchPlaceHolder:"Recherche...",ngMenuText:"Choisir des colonnes:",ngShowingItemsLabel:"Articles Affichage des:",ngTotalItemsLabel:"Nombre total d'articles:",ngSelectedItemsLabel:"Éléments Articles:",ngPageSizeLabel:"Taille de page:",ngPagerFirstTitle:"Première page",ngPagerNextTitle:"Page Suivante",ngPagerPrevTitle:"Page précédente",ngPagerLastTitle:"Dernière page"};E.ngGrid.i18n.nl={ngAggregateLabel:"items",ngGroupPanelDescription:"Sleep hier een kolomkop om op te groeperen.",ngSearchPlaceHolder:"Zoeken...",ngMenuText:"Kies kolommen:",ngShowingItemsLabel:"Toon items:",ngTotalItemsLabel:"Totaal items:",ngSelectedItemsLabel:"Geselecteerde items:",ngPageSizeLabel:"Pagina grootte:, ",ngPagerFirstTitle:"Eerste pagina",ngPagerNextTitle:"Volgende pagina",ngPagerPrevTitle:"Vorige pagina",ngPagerLastTitle:"Laatste pagina"};E.ngGrid.i18n["pt-br"]={ngAggregateLabel:"itens",ngGroupPanelDescription:"Arraste e solte uma coluna aqui para agrupar por essa coluna",ngSearchPlaceHolder:"Procurar...",ngMenuText:"Selecione as colunas:",ngShowingItemsLabel:"Mostrando os Itens:",ngTotalItemsLabel:"Total de Itens:",ngSelectedItemsLabel:"Items Selecionados:",ngPageSizeLabel:"Tamanho da Página:",ngPagerFirstTitle:"Primeira Página",ngPagerNextTitle:"Próxima Página",ngPagerPrevTitle:"Página Anterior",ngPagerLastTitle:"Última Página"};E.ngGrid.i18n.ru={ngAggregateLabel:"записи",ngGroupPanelDescription:"Перетащите сюда заголовок колонки для группировки по этой колонке.",ngSearchPlaceHolder:"Искать...",ngMenuText:"Выберите столбцы:",ngShowingItemsLabel:"Показаны записи:",ngTotalItemsLabel:"Всего записей:",ngSelectedItemsLabel:"Выбранные записи:",ngPageSizeLabel:"Строк на странице:",ngPagerFirstTitle:"Первая страница",ngPagerNextTitle:"Следующая страница",ngPagerPrevTitle:"Предыдущая страница",ngPagerLastTitle:"Последняя страница"};E.ngGrid.i18n["zh-cn"]={ngAggregateLabel:"条目",ngGroupPanelDescription:"拖曳表头到此处以进行分组",ngSearchPlaceHolder:"搜索...",ngMenuText:"数据分组与选择列：",ngShowingItemsLabel:"当前显示条目：",ngTotalItemsLabel:"条目总数：",ngSelectedItemsLabel:"选中条目：",ngPageSizeLabel:"每页显示数：",ngPagerFirstTitle:"回到首页",ngPagerNextTitle:"下一页",ngPagerPrevTitle:"上一页",ngPagerLastTitle:"前往尾页"};E.ngGrid.i18n["zh-tw"]={ngAggregateLabel:"筆",ngGroupPanelDescription:"拖拉表頭到此處以進行分組",ngSearchPlaceHolder:"搜尋...",ngMenuText:"選擇欄位：",ngShowingItemsLabel:"目前顯示筆數：",ngTotalItemsLabel:"總筆數：",ngSelectedItemsLabel:"選取筆數：",ngPageSizeLabel:"每頁顯示：",ngPagerFirstTitle:"第一頁",ngPagerNextTitle:"下一頁",ngPagerPrevTitle:"上一頁",ngPagerLastTitle:"最後頁"};angular.module("ngGrid").run(["$templateCache",function(L){L.put("aggregateTemplate.html",'<div ng-click="row.toggleExpand()" ng-style="rowStyle(row)" class="ngAggregate">\r\n    <span class="ngAggregateText">{{row.label CUSTOM_FILTERS}} ({{row.totalChildren()}} {{AggItemsLabel}})</span>\r\n    <div class="{{row.aggClass()}}"></div>\r\n</div>\r\n');L.put("cellEditTemplate.html",'<div ng-cell-has-focus ng-dblclick="CELL_EDITABLE_CONDITION && editCell()">\r\n\t<div ng-edit-cell-if="!(isFocused && CELL_EDITABLE_CONDITION)">\t\r\n\t\tDISPLAY_CELL_TEMPLATE\r\n\t</div>\r\n\t<div ng-edit-cell-if="isFocused && CELL_EDITABLE_CONDITION">\r\n\t\tEDITABLE_CELL_TEMPLATE\r\n\t</div>\r\n</div>\r\n');L.put("cellTemplate.html",'<div class="ngCellText" ng-class="col.colIndex()"><span ng-cell-text>{{COL_FIELD CUSTOM_FILTERS}}</span></div>');L.put("checkboxCellTemplate.html",'<div class="ngSelectionCell"><input tabindex="-1" class="ngSelectionCheckbox" type="checkbox" ng-checked="row.selected" /></div>');L.put("checkboxHeaderTemplate.html",'<input class="ngSelectionHeader" type="checkbox" ng-show="multiSelect" ng-model="allSelected" ng-change="toggleSelectAll(allSelected, true)"/>');L.put("editableCellTemplate.html",'<input ng-class="\'colt\' + col.index" ng-input="COL_FIELD" ng-model="COL_FIELD" />');L.put("footerTemplate.html",'<div ng-show="showFooter" class="ngFooterPanel" ng-class="{\'ui-widget-content\': jqueryUITheme, \'ui-corner-bottom\': jqueryUITheme}" ng-style="footerStyle()">\r\n    <div class="ngTotalSelectContainer" >\r\n        <div class="ngFooterTotalItems" ng-class="{\'ngNoMultiSelect\': !multiSelect}" >\r\n            <span class="ngLabel">{{i18n.ngTotalItemsLabel}} {{maxRows()}}</span><span ng-show="filterText.length > 0" class="ngLabel">({{i18n.ngShowingItemsLabel}} {{totalFilteredItemsLength()}})</span>\r\n        </div>\r\n        <div class="ngFooterSelectedItems" ng-show="multiSelect">\r\n            <span class="ngLabel">{{i18n.ngSelectedItemsLabel}} {{selectedItems.length}}</span>\r\n        </div>\r\n    </div>\r\n    <div class="ngPagerContainer" style="float: right; margin-top: 10px;" ng-show="enablePaging" ng-class="{\'ngNoMultiSelect\': !multiSelect}">\r\n        <div style="float:left; margin-right: 10px;" class="ngRowCountPicker">\r\n            <span style="float: left; margin-top: 3px;" class="ngLabel">{{i18n.ngPageSizeLabel}}</span>\r\n            <select style="float: left;height: 27px; width: 100px" ng-model="pagingOptions.pageSize" >\r\n                <option ng-repeat="size in pagingOptions.pageSizes">{{size}}</option>\r\n            </select>\r\n        </div>\r\n        <div style="float:left; margin-right: 10px; line-height:25px;" class="ngPagerControl" style="float: left; min-width: 135px;">\r\n            <button type="button" class="ngPagerButton" ng-click="pageToFirst()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerFirstTitle}}"><div class="ngPagerFirstTriangle"><div class="ngPagerFirstBar"></div></div></button>\r\n            <button type="button" class="ngPagerButton" ng-click="pageBackward()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerPrevTitle}}"><div class="ngPagerFirstTriangle ngPagerPrevTriangle"></div></button>\r\n            <input class="ngPagerCurrent" min="1" max="{{currentMaxPages}}" type="number" style="width:50px; height: 24px; margin-top: 1px; padding: 0 4px;" ng-model="pagingOptions.currentPage"/>\r\n            <span class="ngGridMaxPagesNumber" ng-show="maxPages() > 0">/ {{maxPages()}}</span>\r\n            <button type="button" class="ngPagerButton" ng-click="pageForward()" ng-disabled="cantPageForward()" title="{{i18n.ngPagerNextTitle}}"><div class="ngPagerLastTriangle ngPagerNextTriangle"></div></button>\r\n            <button type="button" class="ngPagerButton" ng-click="pageToLast()" ng-disabled="cantPageToLast()" title="{{i18n.ngPagerLastTitle}}"><div class="ngPagerLastTriangle"><div class="ngPagerLastBar"></div></div></button>\r\n        </div>\r\n    </div>\r\n</div>\r\n');L.put("gridTemplate.html",'<div class="ngTopPanel" ng-class="{\'ui-widget-header\':jqueryUITheme, \'ui-corner-top\': jqueryUITheme}" ng-style="topPanelStyle()">\r\n    <div class="ngGroupPanel" ng-show="showGroupPanel()" ng-style="groupPanelStyle()">\r\n        <div class="ngGroupPanelDescription" ng-show="configGroups.length == 0">{{i18n.ngGroupPanelDescription}}</div>\r\n        <ul ng-show="configGroups.length > 0" class="ngGroupList">\r\n            <li class="ngGroupItem" ng-repeat="group in configGroups">\r\n                <span class="ngGroupElement">\r\n                    <span class="ngGroupName">{{group.displayName}}\r\n                        <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span>\r\n                    </span>\r\n                    <span ng-hide="$last" class="ngGroupArrow"></span>\r\n                </span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div class="ngHeaderContainer" ng-style="headerStyle()">\r\n        <div ng-header-row class="ngHeaderScroller" ng-style="headerScrollerStyle()"></div>\r\n    </div>\r\n    <div ng-grid-menu></div>\r\n</div>\r\n<div class="ngViewport" unselectable="on" ng-viewport ng-class="{\'ui-widget-content\': jqueryUITheme}" ng-style="viewportStyle()">\r\n    <div class="ngCanvas" ng-style="canvasStyle()">\r\n        <div ng-style="rowStyle(row)" ng-repeat="row in renderedRows" ng-click="row.toggleSelected($event)" ng-class="row.alternatingRowClass()" ng-row></div>\r\n    </div>\r\n</div>\r\n<div ng-grid-footer></div>\r\n');L.put("headerCellTemplate.html",'<div class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !col.noSortVisible() }">\r\n    <div ng-click="col.sort($event)" ng-class="\'colt\' + col.index" class="ngHeaderText">{{col.displayName}}</div>\r\n    <div class="ngSortButtonDown" ng-click="col.sort($event)" ng-show="col.showSortButtonDown()"></div>\r\n    <div class="ngSortButtonUp" ng-click="col.sort($event)" ng-show="col.showSortButtonUp()"></div>\r\n    <div class="ngSortPriority">{{col.sortPriority}}</div>\r\n    <div ng-class="{ ngPinnedIcon: col.pinned, ngUnPinnedIcon: !col.pinned }" ng-click="togglePin(col)" ng-show="col.pinnable"></div>\r\n</div>\r\n<div ng-show="col.resizable" class="ngHeaderGrip" ng-click="col.gripClick($event)" ng-mousedown="col.gripOnMouseDown($event)"></div>\r\n');L.put("headerRowTemplate.html",'<div ng-style="{ height: col.headerRowHeight }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngHeaderCell">\r\n\t<div class="ngVerticalBar" ng-style="{height: col.headerRowHeight}" ng-class="{ ngVerticalBarVisible: !$last }">&nbsp;</div>\r\n\t<div ng-header-cell></div>\r\n</div>');L.put("menuTemplate.html",'<div ng-show="showColumnMenu || showFilter"  class="ngHeaderButton" ng-click="toggleShowMenu()">\r\n    <div class="ngHeaderButtonArrow"></div>\r\n</div>\r\n<div ng-show="showMenu" class="ngColMenu">\r\n    <div ng-show="showFilter">\r\n        <input placeholder="{{i18n.ngSearchPlaceHolder}}" type="text" ng-model="filterText"/>\r\n    </div>\r\n    <div ng-show="showColumnMenu">\r\n        <span class="ngMenuText">{{i18n.ngMenuText}}</span>\r\n        <ul class="ngColList">\r\n            <li class="ngColListItem" ng-repeat="col in columns | ngColumns">\r\n                <label><input ng-disabled="col.pinned" type="checkbox" class="ngColListCheckbox" ng-model="col.visible"/>{{col.displayName}}</label>\r\n\t\t\t\t<a title="Group By" ng-class="col.groupedByClass()" ng-show="col.groupable && col.visible" ng-click="groupBy(col)"></a>\r\n\t\t\t\t<span class="ngGroupingNumber" ng-show="col.groupIndex > 0">{{col.groupIndex}}</span>          \r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>');L.put("rowTemplate.html",'<div ng-style="{ \'cursor\': row.cursor }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngCell {{col.cellClass}}">\r\n\t<div class="ngVerticalBar" ng-style="{height: rowHeight}" ng-class="{ ngVerticalBarVisible: !$last }">&nbsp;</div>\r\n\t<div ng-cell></div>\r\n</div>')}])}(window,jQuery));