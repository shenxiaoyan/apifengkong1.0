(function(b,a){angular.module("toaster",[]).constant("toasterConfig",{limit:0,"tap-to-dismiss":true,"close-button":false,"newest-on-top":true,"time-out":5000,"icon-classes":{error:"toast-error",info:"toast-info",wait:"toast-wait",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-right","title-class":"toast-title","message-class":"toast-message","prevent-duplicates":false,"mouseover-timer-stop":true}).service("toaster",["$rootScope","toasterConfig",function(c,d){this.pop=function(m,o,j,n,i,l,p,g,f,k){if(angular.isObject(m)){var h=m;this.toast={type:h.type,title:h.title,body:h.body,timeout:h.timeout,bodyOutputType:h.bodyOutputType,clickHandler:h.clickHandler,showCloseButton:h.showCloseButton,uid:h.toastId,onHideCallback:h.onHideCallback};f=h.toastId;p=h.toasterId}else{this.toast={type:m,title:o,body:j,timeout:n,bodyOutputType:i,clickHandler:l,showCloseButton:g,uid:f,onHideCallback:k}}c.$emit("toaster-newToast",p,f)};this.clear=function(f,g){c.$emit("toaster-clearToasts",f,g)};for(var e in d["icon-classes"]){this[e]=(function(f){return function(n,j,m,i,l,o,g,h,k){if(angular.isString(n)){this.pop(f,n,j,m,i,l,o,g,h,k)}else{this.pop(angular.extend(n,{type:f}))}}})(e)}}]).factory("toasterEventRegistry",["$rootScope",function(d){var c=null,e=null,h=[],f=[],g;g={setup:function(){if(!c){c=d.$on("toaster-newToast",function(n,k,m){for(var l=0,j=h.length;l<j;l++){h[l](n,k,m)}})}if(!e){e=d.$on("toaster-clearToasts",function(n,k,m){for(var l=0,j=f.length;l<j;l++){f[l](n,k,m)}})}},subscribeToNewToastEvent:function(i){h.push(i)},subscribeToClearToastsEvent:function(i){f.push(i)},unsubscribeToNewToastEvent:function(j){var i=h.indexOf(j);if(i>=0){h.splice(i,1)}if(h.length===0){c();c=null}},unsubscribeToClearToastsEvent:function(j){var i=f.indexOf(j);if(i>=0){f.splice(i,1)}if(f.length===0){e();e=null}}};return{setup:g.setup,subscribeToNewToastEvent:g.subscribeToNewToastEvent,subscribeToClearToastsEvent:g.subscribeToClearToastsEvent,unsubscribeToNewToastEvent:g.unsubscribeToNewToastEvent,unsubscribeToClearToastsEvent:g.unsubscribeToClearToastsEvent}}]).directive("toasterContainer",["$parse","$rootScope","$interval","$sce","toasterConfig","toaster","toasterEventRegistry",function(h,d,i,f,e,g,c){return{replace:true,restrict:"EA",scope:true,link:function(r,p,q){var k=0,s;s=angular.extend({},e,r.$eval(q.toasterOptions));r.config={toasterId:s["toaster-id"],position:s["position-class"],title:s["title-class"],message:s["message-class"],tap:s["tap-to-dismiss"],closeButton:s["close-button"],animation:s["animation-class"],mouseoverTimer:s["mouseover-timer-stop"]};r.$on("$destroy",function(){c.unsubscribeToNewToastEvent(r._onNewToast);c.unsubscribeToClearToastsEvent(r._onClearToasts)});function n(t,u){t.timeoutPromise=i(function(){r.removeToast(t.id)},u,1)}r.configureTimer=function(t){var u=angular.isNumber(t.timeout)?t.timeout:s["time-out"];if(typeof u==="object"){u=u[t.type]}if(u>0){n(t,u)}};function l(u,y){u.type=s["icon-classes"][u.type];if(!u.type){u.type=s["icon-class"]}if(s["prevent-duplicates"]===true){if(j(y)){if(r.toasters.length>0&&r.toasters[r.toasters.length-1].body===u.body){return}}else{var x,t;for(x=0,t=r.toasters.length;x<t;x++){if(r.toasters[x].uid===y){o(x);x--;t=r.toasters.length}}}}u.id=++k;if(!j(y)){u.uid=y}var w=s["close-button"];if(typeof u.showCloseButton==="boolean"){}else{if(typeof w==="boolean"){u.showCloseButton=w}else{if(typeof w==="object"){var z=w[u.type];if(typeof z!=="undefined"&&z!==null){u.showCloseButton=z}}else{u.showCloseButton=false}}}u.bodyOutputType=u.bodyOutputType||s["body-output-type"];switch(u.bodyOutputType){case"trustedHtml":u.html=f.trustAsHtml(u.body);break;case"template":u.bodyTemplate=u.body||s["body-template"];break;case"templateWithData":var A=h(u.body||s["body-template"]);var v=A(r);u.bodyTemplate=v.template;u.data=v.data;break}r.configureTimer(u);if(s["newest-on-top"]===true){r.toasters.unshift(u);if(s.limit>0&&r.toasters.length>s.limit){r.toasters.pop()}}else{r.toasters.push(u);if(s.limit>0&&r.toasters.length>s.limit){r.toasters.shift()}}}r.removeToast=function(w){var v,u,t;for(v=0,u=r.toasters.length;v<u;v++){if(r.toasters[v].id===w){o(v);break}}};function o(u){var t=r.toasters[u];if(t){if(t.timeoutPromise){i.cancel(t.timeoutPromise)}r.toasters.splice(u,1);if(angular.isFunction(t.onHideCallback)){t.onHideCallback()}}}function m(u){for(var t=r.toasters.length-1;t>=0;t--){if(j(u)){o(t)}else{if(r.toasters[t].uid==u){o(t)}}}}r.toasters=[];function j(t){return angular.isUndefined(t)||t===null}r._onNewToast=function(v,t,u){if((j(r.config.toasterId)&&j(t))||(!j(r.config.toasterId)&&!j(t)&&r.config.toasterId==t)){l(g.toast,u)}};r._onClearToasts=function(v,t,u){if(t=="*"||(j(r.config.toasterId)&&j(t))||(!j(r.config.toasterId)&&!j(t)&&r.config.toasterId==t)){m(u)}};c.setup();c.subscribeToNewToastEvent(r._onNewToast);c.subscribeToClearToastsEvent(r._onClearToasts)},controller:["$scope","$element","$attrs",function(l,k,j){l.stopTimer=function(m){if(l.config.mouseoverTimer===true){if(m.timeoutPromise){i.cancel(m.timeoutPromise);m.timeoutPromise=null}}};l.restartTimer=function(m){if(l.config.mouseoverTimer===true){if(!m.timeoutPromise){l.configureTimer(m)}}else{if(m.timeoutPromise===null){l.removeToast(m.id)}}};l.click=function(m,o){if(l.config.tap===true||(m.showCloseButton===true&&o===true)){var n=true;if(m.clickHandler){if(angular.isFunction(m.clickHandler)){n=m.clickHandler(m,o)}else{if(angular.isFunction(l.$parent.$eval(m.clickHandler))){n=l.$parent.$eval(m.clickHandler)(m,o)}else{console.log("TOAST-NOTE: Your click handler is not inside a parent scope of toaster-container.")}}}if(n){l.removeToast(m.id)}}}}],template:'<div id="toast-container" ng-class="[config.position, config.animation]"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="click(toaster)" ng-mouseover="stopTimer(toaster)" ng-mouseout="restartTimer(toaster)"><button type="button" class="toast-close-button" ng-show="toaster.showCloseButton" ng-click="click(toaster, true)">&times;</button><div ng-class="config.title">{{toaster.title}}</div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"></div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="templateWithData"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-default >{{toaster.body}}</div></div></div></div>'}}])})(window,document);