(function(){var a,b=[].indexOf||function(e){for(var d=0,c=this.length;d<c;d++){if(d in this&&this[d]===e){return d}}return -1};a=angular.module("angularBootstrapNavTree",[]);a.directive("abnTree",["$timeout",function(c){return{restrict:"E",template:'<ul class="nav nav-list nav-pills nav-stacked abn-tree">\n  <li ng-repeat="row in tree_rows | filter:{visible:true} track by row.branch.uid" ng-animate="\'abn-tree-animate\'" ng-class="\'level-\' + {{ row.level }} + (row.branch.selected ? \' active\':\'\') + \' \' +row.classes.join(\' \')" class="abn-tree-row"><a ng-click="user_clicks_branch(row.branch)"><i ng-class="row.tree_icon" ng-click="row.branch.expanded = !row.branch.expanded" class="indented tree-icon"> </i><span class="indented tree-label">{{ row.label }} </span></a></li>\n</ul>',replace:true,scope:{treeData:"=",onSelect:"&",initialSelection:"@",treeControl:"="},link:function(q,e,m){var j,h,i,f,l,g,d,k,p,o,r;j=function(n){console.log("ERROR:"+n);;return void 0};if(m.iconExpand==null){m.iconExpand="icon-plus  glyphicon glyphicon-plus  fa fa-plus"}if(m.iconCollapse==null){m.iconCollapse="icon-minus glyphicon glyphicon-minus fa fa-minus"}if(m.iconLeaf==null){m.iconLeaf="icon-file  glyphicon glyphicon-file  fa fa-file"}if(m.expandLevel==null){m.expandLevel="3"}i=parseInt(m.expandLevel,10);if(!q.treeData){alert("no treeData defined for the tree!");return}if(q.treeData.length==null){if(treeData.label!=null){q.treeData=[treeData]}else{alert("treeData should be an array of root branches");return}}l=function(x){var t,w,v,s,u,n;t=function(A,E){var D,C,z,B,y;x(A,E);if(A.children!=null){B=A.children;y=[];for(C=0,z=B.length;C<z;C++){D=B[C];y.push(t(D,E+1))}return y}};u=q.treeData;n=[];for(v=0,s=u.length;v<s;v++){w=u[v];n.push(t(w,1))}return n};o=null;p=function(n){if(!n){if(o!=null){o.selected=false}o=null;return}if(n!==o){if(o!=null){o.selected=false}n.selected=true;o=n;h(n);if(n.onSelect!=null){return c(function(){return n.onSelect(n)})}else{if(q.onSelect!=null){return c(function(){return q.onSelect({branch:n})})}}}};q.user_clicks_branch=function(n){if(n!==o){return p(n)}};g=function(s){var n;n=void 0;if(s.parent_uid){l(function(t){if(t.uid===s.parent_uid){return n=t}})}return n};f=function(t,s){var n;n=g(t);if(n!=null){s(n);return f(n,s)}};h=function(n){return f(n,function(s){return s.expanded=true})};q.tree_rows=[];k=function(){var t,w,v,s,u,n;l(function(x,y){if(!x.uid){return x.uid=""+Math.random()}});console.log("UIDs are set.");l(function(x){var C,B,z,A,y;if(angular.isArray(x.children)){A=x.children;y=[];for(B=0,z=A.length;B<z;B++){C=A[B];y.push(C.parent_uid=x.uid)}return y}});q.tree_rows=[];l(function(x){var z,y;if(x.children){if(x.children.length>0){y=function(A){if(typeof A==="string"){return{label:A,children:[]}}else{return A}};return x.children=(function(){var D,B,C,A;C=x.children;A=[];for(D=0,B=C.length;D<B;D++){z=C[D];A.push(y(z))}return A})()}}else{return x.children=[]}});t=function(x,G,A){var z,B,y,D,F,E,C;if(G.expanded==null){G.expanded=false}if(G.classes==null){G.classes=[]}if(!G.noLeaf&&(!G.children||G.children.length===0)){y=m.iconLeaf;if(b.call(G.classes,"leaf")<0){G.classes.push("leaf")}}else{if(G.expanded){y=m.iconCollapse}else{y=m.iconExpand}}q.tree_rows.push({level:x,branch:G,label:G.label,classes:G.classes,tree_icon:y,visible:A});if(G.children!=null){E=G.children;C=[];for(D=0,F=E.length;D<F;D++){z=E[D];B=A&&G.expanded;C.push(t(x+1,z,B))}return C}};u=q.treeData;n=[];for(v=0,s=u.length;v<s;v++){w=u[v];n.push(t(1,w,true))}return n};q.$watch("treeData",k,true);if(m.initialSelection!=null){l(function(n){if(n.label===m.initialSelection){return c(function(){return p(n)})}})}d=q.treeData.length;console.log("num root branches = "+d);l(function(n,s){n.level=s;return n.expanded=n.level<i});if(q.treeControl!=null){if(angular.isObject(q.treeControl)){r=q.treeControl;r.expand_all=function(){return l(function(n,s){return n.expanded=true})};r.collapse_all=function(){return l(function(n,s){return n.expanded=false})};r.get_first_branch=function(){d=q.treeData.length;if(d>0){return q.treeData[0]}};r.select_first_branch=function(){var n;n=r.get_first_branch();return r.select_branch(n)};r.get_selected_branch=function(){return o};r.get_parent_branch=function(n){return g(n)};r.select_branch=function(n){p(n);return n};r.get_children=function(n){return n.children};r.select_parent_branch=function(n){var s;if(n==null){n=r.get_selected_branch()}if(n!=null){s=r.get_parent_branch(n);if(s!=null){r.select_branch(s);return s}}};r.add_branch=function(n,s){if(n!=null){n.children.push(s);n.expanded=true}else{q.treeData.push(s)}return s};r.add_root_branch=function(n){r.add_branch(null,n);return n};r.expand_branch=function(n){if(n==null){n=r.get_selected_branch()}if(n!=null){n.expanded=true;return n}};r.collapse_branch=function(n){if(n==null){n=o}if(n!=null){n.expanded=false;return n}};r.get_siblings=function(n){var s,t;if(n==null){n=o}if(n!=null){s=r.get_parent_branch(n);if(s){t=s.children}else{t=q.treeData}return t}};r.get_next_sibling=function(n){var s,t;if(n==null){n=o}if(n!=null){t=r.get_siblings(n);d=t.length;s=t.indexOf(n);if(s<d){return t[s+1]}}};r.get_prev_sibling=function(n){var s,t;if(n==null){n=o}t=r.get_siblings(n);d=t.length;s=t.indexOf(n);if(s>0){return t[s-1]}};r.select_next_sibling=function(n){var s;if(n==null){n=o}if(n!=null){s=r.get_next_sibling(n);if(s!=null){return r.select_branch(s)}}};r.select_prev_sibling=function(n){var s;if(n==null){n=o}if(n!=null){s=r.get_prev_sibling(n);if(s!=null){return r.select_branch(s)}}};r.get_first_child=function(n){var s;if(n==null){n=o}if(n!=null){if(((s=n.children)!=null?s.length:void 0)>0){return n.children[0]}}};r.get_closest_ancestor_next_sibling=function(n){var t,s;t=r.get_next_sibling(n);if(t!=null){return t}else{s=r.get_parent_branch(n);return r.get_closest_ancestor_next_sibling(s)}};r.get_next_branch=function(n){var s;if(n==null){n=o}if(n!=null){s=r.get_first_child(n);if(s!=null){return s}else{s=r.get_closest_ancestor_next_sibling(n);return s}}};r.select_next_branch=function(n){var s;if(n==null){n=o}if(n!=null){s=r.get_next_branch(n);if(s!=null){r.select_branch(s);return s}}};r.last_descendant=function(n){var s;if(n==null){}d=n.children.length;if(d===0){return n}else{s=n.children[d-1];return r.last_descendant(s)}};r.get_prev_branch=function(n){var s,t;if(n==null){n=o}if(n!=null){t=r.get_prev_sibling(n);if(t!=null){return r.last_descendant(t)}else{s=r.get_parent_branch(n);return s}}};return r.select_prev_branch=function(n){var s;if(n==null){n=o}if(n!=null){s=r.get_prev_branch(n);if(s!=null){r.select_branch(s);return s}}}}}}}}])}).call(this);